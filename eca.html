<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desafio ECA: Nível Avançado (Versão Estável)</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap');

        :root {
            --cor-primaria: #007bff;
            --cor-secundaria: #6c757d;
            --cor-sucesso: #28a745;
            --cor-perigo: #dc3545;
            --cor-fundo: #f4f7fc;
            --cor-texto: #212529;
            --cor-branca: #ffffff;
            --time1-cor: #0d6efd;
            --time2-cor: #198754;
            --time3-cor: #dc3545;
            --ouro: #ffd700;
            --prata: #c0c0c0;
            --bronze: #cd7f32;
        }

        html, body {
            height: 100%;
            margin: 0;
            overflow: hidden;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--cor-fundo);
            color: var(--cor-texto);
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            height: 95%;
            background-color: var(--cor-branca);
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            padding: 20px 30px;
            text-align: center;
            display: flex;
            flex-direction: column;
        }

        header h1 {
            color: var(--cor-primaria);
            margin: 10px 0 5px 0;
            font-size: 2em;
        }

        /* --- TELAS DE CONTROLE --- */
        #tela-inicial, #tela-final { display: block; }
        .painel-jogo { display: none; flex-grow: 1; flex-direction: column; }
        #tela-inicial .instrucoes {
            text-align: left; max-width: 700px; margin: 20px auto; line-height: 1.7;
            background-color: #f8f9fa; padding: 15px; border-radius: 8px;
        }
        .cadastro-times { display: flex; justify-content: space-around; margin: 30px 0; gap: 20px; flex-wrap: wrap; }
        
        /* --- NOVA ESTRUTURA DE LAYOUT --- */
        #jogo-container {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            min-height: 0;
        }
        #info-superior {
            display: flex; justify-content: space-between; align-items: center; padding: 10px;
            background-color: #e9ecef; border-radius: 10px; margin-bottom: 15px; flex-shrink: 0;
        }
        .identificador-time {
            font-size: 1.1em; font-weight: 700; padding: 8px 15px;
            border-radius: 8px; color: white;
        }
        #contador-pergunta { font-weight: 600; color: var(--cor-secundaria); font-size: 1.2em; }
        #jogo-principal {
            display: grid; grid-template-columns: 5fr 6fr; gap: 25px;
            flex-grow: 1; min-height: 0;
        }
        #pergunta-container {
            background-color: #f8f9fa; border-radius: 15px; padding: 20px;
            display: flex; align-items: center; justify-content: center;
        }
        #pergunta-texto { font-size: 1.6em; font-weight: 600; line-height: 1.4; }
        #interacao-container { display: flex; flex-direction: column; }
        #painel-registro { padding: 10px 0; }
        #painel-registro p { font-weight: 600; color: var(--cor-secundaria); font-size: 1.1em; margin: 0 0 15px 0; }
        .botoes-selecao-time { display: flex; justify-content: center; gap: 15px; }
        .btn-time-selecionar {
            border: 3px solid; color: white; padding: 10px 18px; font-size: 1em;
            font-weight: 600; border-radius: 8px; cursor: pointer; transition: all 0.2s;
        }
        .opcoes-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px; flex-grow: 1; }
        .btn-opcao {
            background-color: var(--cor-primaria); color: var(--cor-branca); border: none; padding: 15px;
            font-size: 1.05em; border-radius: 10px; cursor: pointer; transition: all 0.2s ease;
            display: flex; align-items: center; justify-content: center;
        }
        #feedback-container {
            padding: 20px; border-radius: 8px; font-size: 1.05em; text-align: left;
            line-height: 1.6; flex-grow: 1; display: flex; flex-direction: column; justify-content: center;
        }
        #controles-finais { flex-shrink: 0; height: 60px; padding-top: 10px; }
        .btn-controle {
            background-color: var(--cor-secundaria); color: var(--cor-branca); border: none;
            padding: 12px 28px; font-size: 1.1em; font-weight: 600; border-radius: 50px;
            cursor: pointer; transition: all 0.2s ease;
        }

        /* --- ESTILOS DO PÓDIO E RESUMO FINAL --- */
        #tela-final h2 { color: var(--cor-primaria); font-size: 1.8em; margin-bottom: 20px; }
        .podio-container {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            gap: 5px;
            height: 220px;
            margin: 0 auto;
        }
        .podio-item {
            display: flex; flex-direction: column; justify-content: space-between;
            padding: 15px; border-radius: 10px 10px 0 0; color: var(--cor-texto);
            font-weight: 700; width: 160px; text-align: center; box-shadow: inset 0 4px 10px rgba(0,0,0,0.1);
        }
        .podio-rank { font-size: 1.5em; font-weight: 700; }
        .podio-nome { font-size: 1.2em; margin: 10px 0; }
        .podio-pontos { font-size: 1.8em; }
        .primeiro-lugar { height: 200px; background-color: var(--ouro); order: 2; }
        .segundo-lugar { height: 160px; background-color: var(--prata); order: 1; }
        .terceiro-lugar { height: 120px; background-color: var(--bronze); order: 3; }
        
        .resumo-container {
            display: flex;
            justify-content: space-around;
            gap: 20px;
            margin-top: 30px;
        }
        .resumo-time {
            padding: 15px; border: 3px solid; border-radius: 10px; width: 30%;
        }
        .resumo-time h3 { margin-top: 0; font-size: 1.3em; }
        .resumo-time p { margin: 8px 0; font-size: 1.1em; }
        .btn-time-selecionar.selecionado { transform: translateY(-5px) scale(1.1); box-shadow: 0 8px 20px rgba(0,0,0,0.2); border-width: 4px; }
        .btn-opcao.correta { background-color: var(--cor-sucesso); }
        .btn-opcao.errada { background-color: var(--cor-perigo); }

    </style>
</head>
<body>

    <div class="container">
        <div id="tela-inicial">
             <header><h1>Desafio ECA</h1></header>
            <h2>Como Jogar?</h2>
            <div class="instrucoes">
                1. A turma é dividida em <strong>3 times</strong> com nomes personalizados.<br>
                2. A cada rodada, os times discutem e decidem sua resposta.<br>
                3. A pontuação ficará <strong>secreta</strong> até o final para manter o suspense!<br>
                4. Ao final das 20 perguntas, teremos um pódio e o resumo do desempenho de todos!
            </div>
            <div class="cadastro-times">
                 <div><label for="time1-nome" style="font-weight:600;">Time 1</label><input type="text" id="time1-nome" value="Time Azul" style="border-color: var(--time1-cor);"></div>
                 <div><label for="time2-nome" style="font-weight:600;">Time 2</label><input type="text" id="time2-nome" value="Time Verde" style="border-color: var(--time2-cor);"></div>
                 <div><label for="time3-nome" style="font-weight:600;">Time 3</label><input type="text" id="time3-nome" value="Time Vermelho" style="border-color: var(--time3-cor);"></div>
            </div>
            <button class="btn-controle" id="btn-iniciar" style="display: inline-block; background-color: var(--cor-primaria);">Começar!</button>
        </div>

        <div class="painel-jogo" id="painel-jogo">
            <div id="jogo-container">
                <div id="info-superior">
                    <div id="identificadores-times" style="display: flex; gap: 10px;"></div>
                    <div id="contador-pergunta"></div>
                </div>
                <div id="jogo-principal">
                    <div id="pergunta-container"><p id="pergunta-texto"></p></div>
                    <div id="interacao-container"></div>
                </div>
                <div id="controles-finais">
                     <button class="btn-controle" id="btn-revelar">Revelar Resposta</button>
                     <button class="btn-controle" id="btn-proxima">Próxima Pergunta</button>
                </div>
            </div>
        </div>
        
        <div id="tela-final" style="display: none;">
            <header><h2>Resultado Final</h2></header>
            <div id="resultado-final-container">
                </div>
            <button class="btn-controle" id="btn-reiniciar" style="display: inline-block; margin-top: 25px;">Jogar Novamente</button>
        </div>
    </div>

    <script>
        // --- NOVO BANCO DE DADOS DE PERGUNTAS COMPLEXAS ---
        const perguntas = [
            { pergunta: "O ECA afirma que é 'dever da família, da comunidade, da sociedade em geral e do poder público' assegurar os direitos da criança. O que isso significa na prática?", opcoes: ["Apenas os pais são responsáveis pela criança.", "A responsabilidade é compartilhada por todos na sociedade.", "Apenas o governo deve cuidar das crianças.", "A escola é a única responsável após a família."], resposta: 1, explicacao: "A responsabilidade é de todos! Se um vizinho, um professor ou qualquer cidadão vê um direito sendo violado, ele também tem o dever de proteger a criança." },
            { pergunta: "O direito ao 'respeito' inclui a inviolabilidade da integridade física, psíquica e moral. Qual situação VIOLA diretamente esse direito?", opcoes: ["Receber um castigo de ficar sem videogame.", "Ser alvo de apelidos ofensivos e humilhantes.", "Ter hora para dormir definida pelos pais.", "Ajudar a arrumar a mesa depois do jantar."], resposta: 1, explicacao: "Apelidos ofensivos (bullying) atacam a integridade psíquica e moral da pessoa, sendo uma clara violação do direito ao respeito." },
            { pergunta: "Se uma criança é afastada de seus pais por decisão judicial, qual é a prioridade segundo o ECA para sua nova moradia?", opcoes: ["Ser enviada imediatamente para adoção.", "Permanecer em um abrigo até os 18 anos.", "Ser acolhida por um parente próximo (família extensa).", "Morar com a família do seu melhor amigo."], resposta: 2, explicacao: "O ECA prioriza manter os laços familiares. Por isso, a primeira opção é sempre buscar avós, tios ou outros parentes para cuidar da criança." },
            { pergunta: "Uma criança precisa de um tratamento médico muito caro. A quem a família deve recorrer para garantir o direito à saúde?", opcoes: ["A uma ONG internacional.", "Apenas a um plano de saúde particular.", "Ao poder público (Estado), que deve fornecer pelo SUS.", "A uma 'vaquinha' na internet como única solução."], resposta: 2, explicacao: "O direito à saúde é um dever do Estado. Mesmo que o tratamento seja caro, a família pode e deve exigi-lo do poder público através do SUS." },
            { pergunta: "A partir de que idade um adolescente pode trabalhar legalmente como 'Jovem Aprendiz'?", opcoes: ["A partir dos 12 anos, em qualquer serviço.", "A partir dos 16 anos, em qualquer horário.", "A partir dos 14 anos, em um programa de aprendizagem.", "A partir dos 18 anos, quando se torna adulto."], resposta: 2, explicacao: "A lei permite o trabalho protegido na condição de aprendiz a partir dos 14 anos, garantindo direitos e que o estudo não seja prejudicado." },
            { pergunta: "Qual das situações abaixo é uma atribuição principal do Conselho Tutelar?", opcoes: ["Julgar e prender pais que cometem crimes.", "Pagar a mensalidade de escolas particulares.", "Aplicar medidas de proteção, como incluir a criança em programas de auxílio.", "Substituir o papel dos pais na educação diária."], resposta: 2, explicacao: "O Conselho Tutelar não julga crimes (isso é papel do Juiz), mas age para proteger, aconselhando e encaminhando a criança e a família para serviços de apoio." },
            { pergunta: "Um adolescente de 15 anos criou um perfil falso para ofender um professor. Qual o limite do seu direito à liberdade de expressão nesse caso?", opcoes: ["Nenhum, a internet é livre.", "A liberdade de expressão termina quando viola o direito à honra de outra pessoa.", "Ele só estaria errado se usasse o nome verdadeiro.", "Ele só pode ser punido se o professor provar que ficou triste."], resposta: 1, explicacao: "Nenhum direito é absoluto. A liberdade de expressão é garantida, mas não pode ser usada para cometer crimes, como difamação e calúnia." },
            { pergunta: "O que o ECA exige da escola para garantir o direito à educação de uma criança com deficiência física?", opcoes: ["Que a criança estude em uma sala separada.", "Que a escola forneça rampas, banheiros adaptados e atendimento especializado.", "Que os pais paguem uma taxa extra pela adaptação.", "Que a criança tenha notas mais altas que os outros."], resposta: 1, explicacao: "O direito à educação inclusiva exige que a escola se adapte para receber o aluno, oferecendo acessibilidade e suporte pedagógico especializado." },
            { pergunta: "Qual a diferença fundamental entre a punição de um adolescente de 16 anos que comete um 'ato infracional' e a de um adulto?", opcoes: ["Não há diferença, ambos vão para a mesma prisão.", "O adolescente não pode ser responsabilizado.", "O adolescente recebe uma 'medida socioeducativa', com foco na reeducação.", "O adolescente pode escolher entre ir para a cadeia ou pagar multa."], resposta: 2, explicacao: "O objetivo para o adolescente não é a punição (pena), mas a reeducação e a reintegração social. Por isso, ele cumpre uma medida socioeducativa." },
            { pergunta: "Em uma disputa de guarda, o que significa o princípio do 'melhor interesse da criança'?", opcoes: ["Que ficará com quem tiver mais dinheiro.", "Que a decisão do juiz deve se basear no que é mais saudável para o desenvolvimento da criança.", "Que a criança decide sozinha com quem quer morar.", "Que a guarda será sempre compartilhada, mesmo que haja risco."], resposta: 1, explicacao: "O juiz analisará todos os fatores (afeto, segurança, rotina) para decidir o que será melhor para o bem-estar e desenvolvimento integral da criança." },
            { pergunta: "Qual é o dever correspondente ao direito de ter uma escola limpa e organizada?", opcoes: ["Exigir que a escola contrate mais faxineiros.", "Faltar no dia da limpeza.", "Colaborar para manter a limpeza e não depredar o patrimônio.", "Limpar a sala inteira sozinho todos os dias."], resposta: 2, explicacao: "O direito a um ambiente limpo vem com o dever de ajudar a mantê-lo assim, respeitando o espaço que é de todos." },
            { pergunta: "O dever de 'respeitar pais e responsáveis' significa que a criança ou adolescente deve:", opcoes: ["Concordar com tudo que eles dizem, sem questionar.", "Acatar as regras e orientações para sua proteção.", "Nunca contar a ninguém se estiver sofrendo violência.", "Fazer todas as tarefas domésticas sem ajuda."], resposta: 1, explicacao: "Respeitar envolve ouvir e seguir as orientações dadas para o seu bem-estar, mesmo que você não concorde com elas no momento." },
            { pergunta: "Ao ter acesso à educação, qual é um dos principais deveres do estudante?", opcoes: ["Apenas comparecer à escola para garantir a presença.", "Dedicar-se aos estudos e cumprir as tarefas propostas.", "Ensinar o conteúdo para o professor.", "Passar de ano sem precisar aprender."], resposta: 1, explicacao: "O direito à educação é uma oportunidade que deve ser valorizada com o dever de se esforçar para aprender e evoluir." },
            { pergunta: "O dever de preservar os espaços públicos se aplica quando você está...", opcoes: ["Apenas dentro da sua casa.", "Em uma praça, parque ou biblioteca pública.", "Apenas na escola, porque é obrigatório.", "Em um shopping, porque é um lugar privado."], resposta: 1, explicacao: "Espaços públicos pertencem a toda a comunidade. É nosso dever cuidar deles para que todos possam usar." },
            { pergunta: "Um colega tem dificuldade em uma matéria. Qual atitude demonstra um dever de solidariedade?", opcoes: ["Rir da dificuldade dele.", "Oferecer ajuda para explicar a matéria.", "Fazer o trabalho dele.", "Ignorar, pois o problema não é seu."], resposta: 1, explicacao: "Ajudar um colega a entender, sem fazer o trabalho por ele, é uma atitude que fortalece a todos e cria um ambiente escolar melhor." },
            { pergunta: "Um adolescente de 14 anos vai a uma festa escondido dos pais. Qual dever ele está descumprindo?", opcoes: ["O dever de se divertir.", "O dever de obediência e respeito à autoridade e cuidado dos pais.", "O dever de ser popular na escola.", "O dever de ser independente."], resposta: 1, explicacao: "As regras impostas pelos pais visam a proteção. Desobedecer a uma regra de segurança é desrespeitar o cuidado que eles têm com você." },
            { pergunta: "Durante um trabalho em grupo, um dos membros não faz sua parte. Qual é o dever dos outros integrantes?", opcoes: ["Fazer a parte dele e não falar nada.", "Excluir o nome dele do trabalho.", "Conversar com ele sobre a colaboração e, se não resolver, comunicar o professor.", "Deixar de fazer o trabalho também, em protesto."], resposta: 2, explicacao: "O dever do grupo é primeiro tentar resolver o problema com diálogo e, se não for possível, buscar a mediação do professor, que é a autoridade responsável." },
            { pergunta: "Você recebe uma notícia chocante pelo WhatsApp. Qual é seu dever antes de compartilhar?", opcoes: ["Compartilhar o mais rápido possível.", "Verificar se a informação é verdadeira, para não espalhar 'fake news'.", "Enviar apenas para os melhores amigos.", "Acreditar na notícia imediatamente se tiver uma imagem."], resposta: 1, explicacao: "Espalhar notícias falsas (fake news) é uma irresponsabilidade que pode prejudicar muitas pessoas. Nosso dever é checar a informação antes de repassar." },
            { pergunta: "O grêmio estudantil quer organizar um protesto por melhorias na escola. Qual é o dever do grêmio ao organizar esse evento?", opcoes: ["Quebrar carteiras para mostrar que a estrutura está ruim.", "Organizar o protesto de forma pacífica, respeitando o direito dos outros.", "Fazer o protesto durante a aula de um professor que não gostam.", "Cancelar as aulas por conta própria."], resposta: 1, explicacao: "O direito à manifestação deve ser exercido com o dever de respeitar as pessoas e o patrimônio. A organização pacífica é a forma correta de reivindicar." },
            { pergunta: "Qual é o dever de um adolescente perante a sociedade após cumprir uma medida socioeducativa?", opcoes: ["Nenhum, pois a medida quitou sua dívida.", "Contar para todo mundo o que fez para se tornar popular.", "Mudar de cidade para que ninguém saiba.", "Refletir sobre seu ato e se reintegrar à sociedade de forma responsável."], resposta: 3, explicacao: "A medida socioeducativa serve para a reflexão. O dever do adolescente é usar essa oportunidade para se tornar um cidadão melhor e mais consciente de seus atos." },
        ];
        
        const telaInicial = document.getElementById('tela-inicial');
        const painelJogo = document.getElementById('painel-jogo');
        const telaFinal = document.getElementById('tela-final');
        const resultadoFinalContainer = document.getElementById('resultado-final-container');
        const btnIniciar = document.getElementById('btn-iniciar');
        const btnRevelar = document.getElementById('btn-revelar');
        const btnProxima = document.getElementById('btn-proxima');
        const btnReiniciar = document.getElementById('btn-reiniciar');
        const identificadoresTimesEl = document.getElementById('identificadores-times');
        const contadorPerguntaEl = document.getElementById('contador-pergunta');
        const perguntaTextoEl = document.getElementById('pergunta-texto');
        const interacaoContainer = document.getElementById('interacao-container');
        const NUM_TIMES = 3;
        let nomesDosTimes = [], pontuacoes = [], acertosPorTime = [], perguntaAtualIndex, timesSelecionados = [], respostasDosTimesNaRodada = [];

        function criarConteudoInteracao() { return `<div id="painel-registro"><p>1º: Selecione o(s) time(s). 2º: Clique na resposta escolhida.</p><div class="botoes-selecao-time" id="botoes-selecao-time"></div></div><div class="opcoes-grid" id="opcoes-container"></div>`; }

        function iniciarJogo() {
            nomesDosTimes = [ document.getElementById('time1-nome').value, document.getElementById('time2-nome').value, document.getElementById('time3-nome').value ];
            pontuacoes = Array(NUM_TIMES).fill(0);
            acertosPorTime = Array(NUM_TIMES).fill(0);
            perguntaAtualIndex = 0;
            telaInicial.style.display = 'none'; telaFinal.style.display = 'none'; painelJogo.style.display = 'flex';
            montarInfoSuperior();
            mostrarPergunta();
        }

        function mostrarPergunta() {
            resetarEstadoDaRodada();
            const perguntaAtual = perguntas[perguntaAtualIndex];
            contadorPerguntaEl.textContent = `Pergunta ${perguntaAtualIndex + 1} / ${perguntas.length}`;
            perguntaTextoEl.textContent = perguntaAtual.pergunta;
            const botoesSelecaoTimeEl = document.getElementById('botoes-selecao-time');
            nomesDosTimes.forEach((nome, index) => {
                const button = document.createElement('button');
                button.innerText = nome;
                button.className = 'btn-time-selecionar'; button.id = `btn-selecionar-${index}`;
                button.style.backgroundColor = `var(--time${index + 1}-cor)`;
                button.style.borderColor = `var(--time${index + 1}-cor)`;
                button.addEventListener('click', () => toggleSelecaoTime(index));
                botoesSelecaoTimeEl.appendChild(button);
            });
            const opcoesContainer = document.getElementById('opcoes-container');
            perguntaAtual.opcoes.forEach((opcao, index) => {
                const button = document.createElement('button');
                button.innerText = opcao; button.className = 'btn-opcao';
                button.addEventListener('click', () => registrarRespostaParaTimes(index));
                opcoesContainer.appendChild(button);
            });
        }
        
        function registrarRespostaParaTimes(opcaoIndex) { 
            if (timesSelecionados.length === 0) { alert("Selecione um time antes de registrar a resposta."); return; } 
            timesSelecionados.forEach(timeIndex => { 
                respostasDosTimesNaRodada[timeIndex] = opcaoIndex; 
                const btnTime = document.getElementById(`btn-selecionar-${timeIndex}`); 
                btnTime.disabled = true; 
                btnTime.innerText = `${nomesDosTimes[timeIndex]} - OK!`; 
            }); 
            timesSelecionados = []; 
            document.querySelectorAll('.btn-time-selecionar.selecionado').forEach(btn => btn.classList.remove('selecionado')); 
            if (respostasDosTimesNaRodada.filter(r => r !== null).length === NUM_TIMES) { 
                btnRevelar.style.display = 'inline-block'; 
            } 
        }

        function revelarRespostas() { 
            btnRevelar.style.display = 'none'; 
            const perguntaAtual = perguntas[perguntaAtualIndex]; 
            const respostaCorreta = perguntaAtual.resposta; 
            for (let i = 0; i < NUM_TIMES; i++) { 
                if (respostasDosTimesNaRodada[i] === respostaCorreta) { 
                    pontuacoes[i] += 10; 
                    acertosPorTime[i] += 1;
                } 
            } 
            document.querySelectorAll('.btn-opcao').forEach((btn, index) => { 
                btn.disabled = true; 
                if (index === respostaCorreta) btn.classList.add('correta'); 
                else if (respostasDosTimesNaRodada.includes(index)) btn.classList.add('errada'); 
            }); 
            
            const acertos = respostasDosTimesNaRodada.filter(r => r === respostaCorreta).length;
            const textoRespostaCorreta = perguntaAtual.opcoes[respostaCorreta];
            let tituloFeedback = '', classeFeedback = '';
            
            if (acertos === NUM_TIMES) { tituloFeedback = 'Parabéns a todos! Resposta Correta!'; classeFeedback = 'feedback-sucesso'; }
            else if (acertos > 0) { tituloFeedback = 'Bom debate! Vamos analisar a resposta.'; classeFeedback = 'feedback-aviso'; }
            else { tituloFeedback = 'Essa foi desafiadora! Vamos aprender juntos.'; classeFeedback = 'feedback-erro'; }

            interacaoContainer.innerHTML = `<div id="feedback-container" class="${classeFeedback}"><h3 style="margin-top: 0;">${tituloFeedback}</h3><p>A resposta correta é: <strong>"${textoRespostaCorreta}"</strong>.</p><p><strong>Por quê?</strong> ${perguntaAtual.explicacao}</p></div>`; 
            
            if (perguntas.length > perguntaAtualIndex + 1) { 
                btnProxima.style.display = 'inline-block'; 
            } else { 
                setTimeout(mostrarTelaFinal, 5000); 
            } 
        }
        
        function proximaPergunta() { 
            perguntaAtualIndex++; 
            mostrarPergunta(); 
        }

        function mostrarTelaFinal() {
            painelJogo.style.display = 'none';
            telaFinal.style.display = 'block';
            resultadoFinalContainer.innerHTML = '';
            
            const timesComDados = nomesDosTimes.map((nome, index) => ({
                nome: nome,
                pontuacao: pontuacoes[index],
                cor: `var(--time${index + 1}-cor)`,
                acertos: acertosPorTime[index]
            }));

            const timesOrdenados = [...timesComDados].sort((a, b) => b.pontuacao - a.pontuacao);

            let podioHTML = '<div class="podio-container">';
            const classesPodio = ['primeiro-lugar', 'segundo-lugar', 'terceiro-lugar'];
            const ranksPodio = ['1º Lugar', '2º Lugar', '3º Lugar'];
            timesOrdenados.forEach((time, index) => {
                podioHTML += `<div class="podio-item ${classesPodio[index]}"><div class="podio-rank">${ranksPodio[index]}</div><div class="podio-nome">${time.nome}</div><div class="podio-pontos">${time.pontuacao} pts</div></div>`;
            });
            podioHTML += '</div>';

            let resumoHTML = '<h2>Resumo do Desempenho</h2><div class="resumo-container">';
            timesComDados.forEach(time => {
                const aproveitamento = ((time.acertos / perguntas.length) * 100).toFixed(0);
                resumoHTML += `<div class="resumo-time" style="border-color: ${time.cor};"><h3 style="color: ${time.cor};">${time.nome}</h3><p><strong>Pontuação Final:</strong> ${time.pontuacao}</p><p><strong>Respostas Corretas:</strong> ${time.acertos} de ${perguntas.length}</p><p><strong>Aproveitamento:</strong> ${aproveitamento}%</p></div>`;
            });
            resumoHTML += '</div>';

            resultadoFinalContainer.innerHTML = podioHTML + resumoHTML;
        }

        function montarInfoSuperior() {
            identificadoresTimesEl.innerHTML = '';
            for (let i = 0; i < NUM_TIMES; i++) {
                const divId = document.createElement('div');
                divId.className = 'identificador-time';
                divId.textContent = nomesDosTimes[i];
                divId.style.backgroundColor = `var(--time${i + 1}-cor)`;
                identificadoresTimesEl.appendChild(divId);
            }
        }
        
        function resetarEstadoDaRodada() {
            timesSelecionados = [];
            respostasDosTimesNaRodada = Array(NUM_TIMES).fill(null);
            interacaoContainer.innerHTML = criarConteudoInteracao();
            btnRevelar.style.display = 'none';
            btnProxima.style.display = 'none';
        }

        function toggleSelecaoTime(timeIndex) {
            const btn = document.getElementById(`btn-selecionar-${timeIndex}`);
            const indexNoArray = timesSelecionados.indexOf(timeIndex);
            if (indexNoArray > -1) {
                timesSelecionados.splice(indexNoArray, 1);
                btn.classList.remove('selecionado');
            } else {
                timesSelecionados.push(timeIndex);
                btn.classList.add('selecionado');
            }
        }
        
        btnIniciar.addEventListener('click', iniciarJogo);
        btnRevelar.addEventListener('click', revelarRespostas);
        btnProxima.addEventListener('click', proximaPergunta);
        btnReiniciar.addEventListener('click', () => {
            telaFinal.style.display = 'none';
            telaInicial.style.display = 'block';
        });
    </script>
</body>
</html>
