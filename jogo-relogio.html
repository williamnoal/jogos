<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Oficina do Relojoeiro - Jogo Steampunk</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Crete+Round&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;700&display=swap');

        body {
            font-family: 'Roboto Slab', serif;
            background-color: #2e2e2e;
            color: #e0e0e0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            position: relative;
        }
        
        /* INÍCIO DO CÓDIGO ADICIONADO ESTRITAMENTE PARA A SETA */
        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 1.2em;
            color: #d4af37; /* Cor de latão para combinar com o tema */
            text-decoration: none;
            font-weight: 700;
            transition: transform 0.3s, color 0.3s;
            z-index: 100; /* Garante que fique sobre os outros elementos */
        }

        .back-button:hover {
            transform: scale(1.1);
            color: #fff; /* Adiciona um brilho ao passar o mouse */
        }
        /* FIM DO CÓDIGO ADICIONADO */

        .background-gears {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            overflow: hidden;
        }

        .gear {
            position: absolute;
            width: 200px;
            height: 200px;
            opacity: 0.15;
            animation: spin 20s linear infinite;
        }

        .gear-2 { width: 150px; height: 150px; animation: spin-reverse 15s linear infinite; }
        .gear-3 { width: 300px; height: 300px; animation-duration: 30s; }
        .gear-4 { width: 100px; height: 100px; animation-duration: 10s; }

        .gear:nth-child(1) { top: -50px; left: -50px; }
        .gear:nth-child(2) { top: 10%; right: -80px; }
        .gear:nth-child(3) { bottom: -100px; left: 20%; }
        .gear:nth-child(4) { bottom: -50px; right: -50px; }
        .gear:nth-child(5) { top: 40%; left: 30%; width: 50px; height: 50px; animation: spin 8s linear infinite;}
        .gear:nth-child(6) { top: 60%; right: 40%; width: 80px; height: 80px; animation: spin-reverse 12s linear infinite;}

        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes spin-reverse { from { transform: rotate(360deg); } to { transform: rotate(0deg); } }
        
        .container {
            background: rgba(30, 30, 30, 0.85);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 0 30px rgba(0,0,0,0.7), inset 0 0 10px #000;
            text-align: center;
            z-index: 1;
            border: 2px solid #444;
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
        }

        h1 {
            font-family: 'Crete Round', serif;
            color: #d4af37;
            font-size: 2.5em;
            margin-top: 0;
            text-shadow: 2px 2px 5px #000;
        }

        #instruction {
            font-size: 1.5em;
            margin-bottom: 30px;
        }

        #clocks-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 30px;
        }

        .clock {
            width: 120px;
            height: 120px;
            border: 5px solid #614a1f;
            border-radius: 50%;
            position: relative;
            background-color: #f3e5ab;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
        }
        
        .clock:hover {
            transform: scale(1.1);
            box-shadow: 0 0 25px #d4af37;
        }

        .hand {
            width: 50%;
            height: 4px;
            background: #333;
            position: absolute;
            top: 50%;
            left: 0;
            transform-origin: 100%;
            margin-top: -2px; /* metade da altura */
        }

        .hour-hand {
            width: 35%;
            height: 6px;
            background: #1a1a1a;
            left: 15%;
            margin-top: -3px; /* metade da altura */
        }
        
        #feedback {
            margin-top: 30px;
            font-size: 1.3em;
            font-weight: bold;
            height: 30px;
        }

        #next-button {
            display: none;
            margin-top: 20px;
            padding: 12px 25px;
            font-size: 1em;
            font-family: 'Roboto Slab', serif;
            color: #fff;
            background: linear-gradient(45deg, #c88d42, #8b5e28);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
        }

        #next-button:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body>

    <a href="anos-iniciais.html" class="back-button" title="Voltar">‹ Voltar</a>

    <div class="background-gears">
        <svg class="gear" viewBox="0 0 100 100"><path fill="#3a3a3a" d="M99,50a49,49,0,0,1-49,49A49,49,0,1,1,99,50ZM50,6A44,44,0,1,0,94,50,44,44,0,0,0,50,6Zm0,17a27,27,0,1,1-27,27A27,27,0,0,1,50,23Zm0,48a21,21,0,1,0-21-21A21,21,0,0,0,50,71Z"></path></svg>
        <svg class="gear gear-2" viewBox="0 0 100 100"><path fill="#3a3a3a" d="M99,50a49,49,0,0,1-49,49A49,49,0,1,1,99,50ZM50,6A44,44,0,1,0,94,50,44,44,0,0,0,50,6Zm0,17a27,27,0,1,1-27,27A27,27,0,0,1,50,23Zm0,48a21,21,0,1,0-21-21A21,21,0,0,0,50,71Z"></path></svg>
        <svg class="gear gear-3" viewBox="0 0 100 100"><path fill="#3a3a3a" d="M99,50a49,49,0,0,1-49,49A49,49,0,1,1,99,50ZM50,6A44,44,0,1,0,94,50,44,44,0,0,0,50,6Zm0,17a27,27,0,1,1-27,27A27,27,0,0,1,50,23Zm0,48a21,21,0,1,0-21-21A21,21,0,0,0,50,71Z"></path></svg>
        <svg class="gear gear-4" viewBox="0 0 100 100"><path fill="#3a3a3a" d="M99,50a49,49,0,0,1-49,49A49,49,0,1,1,99,50ZM50,6A44,44,0,1,0,94,50,44,44,0,0,0,50,6Zm0,17a27,27,0,1,1-27,27A27,27,0,0,1,50,23Zm0,48a21,21,0,1,0-21-21A21,21,0,0,0,50,71Z"></path></svg>
        <svg class="gear gear-5" viewBox="0 0 100 100"><path fill="#3a3a3a" d="M99,50a49,49,0,0,1-49,49A49,49,0,1,1,99,50ZM50,6A44,44,0,1,0,94,50,44,44,0,0,0,50,6Zm0,17a27,27,0,1,1-27,27A27,27,0,0,1,50,23Zm0,48a21,21,0,1,0-21-21A21,21,0,0,0,50,71Z"></path></svg>
        <svg class="gear gear-6" viewBox="0 0 100 100"><path fill="#3a3a3a" d="M99,50a49,49,0,0,1-49,49A49,49,0,1,1,99,50ZM50,6A44,44,0,1,0,94,50,44,44,0,0,0,50,6Zm0,17a27,27,0,1,1-27,27A27,27,0,0,1,50,23Zm0,48a21,21,0,1,0-21-21A21,21,0,0,0,50,71Z"></path></svg>
    </div>

    <div class="container">
        <h1>A Oficina do Relojoeiro</h1>
        <p id="instruction">Encontre o relógio que marca a hora certa!</p>
        <div id="clocks-container"></div>
        <p id="feedback"></p>
        <button id="next-button">Próxima Rodada</button>
    </div>

    <script>
        const instructionEl = document.getElementById('instruction');
        const clocksContainerEl = document.getElementById('clocks-container');
        const feedbackEl = document.getElementById('feedback');
        const nextButtonEl = document.getElementById('next-button');

        let correctHour;
        let correctMinutes;

        function getRandomHour() {
            return Math.floor(Math.random() * 12) + 1;
        }

        function createClock(hour, minutes) {
            const clock = document.createElement('div');
            clock.classList.add('clock');

            const minuteHand = document.createElement('div');
            minuteHand.classList.add('hand', 'minute-hand');
            const minuteAngle = (minutes / 60) * 360 + 90; // +90 para ajustar a posição inicial
            minuteHand.style.transform = `rotate(${minuteAngle}deg)`;

            const hourHand = document.createElement('div');
            hourHand.classList.add('hand', 'hour-hand');
            const hourAngle = ((hour % 12) + minutes / 60) * 30 + 90; // +90 e ajuste para minutos
            hourHand.style.transform = `rotate(${hourAngle}deg)`;
            
            clock.appendChild(minuteHand);
            clock.appendChild(hourHand);
            
            clock.addEventListener('click', () => checkAnswer(hour, minutes));
            return clock;
        }

        function newRound() {
            feedbackEl.textContent = '';
            clocksContainerEl.innerHTML = '';
            nextButtonEl.style.display = 'none';

            correctHour = getRandomHour();
            correctMinutes = 0; // Sempre na hora certa

            let options = [{ hour: correctHour, minutes: correctMinutes }];
            while (options.length < 3) {
                let randomHour = getRandomHour();
                let randomMinutes = Math.floor(Math.random() * 12) * 5;
                if (!options.find(opt => opt.hour === randomHour && opt.minutes === randomMinutes)) {
                    options.push({ hour: randomHour, minutes: randomMinutes });
                }
            }

            options.sort(() => Math.random() - 0.5);

            instructionEl.textContent = `Encontre o relógio que marca ${correctHour}:00`;

            options.forEach(time => {
                const clock = createClock(time.hour, time.minutes);
                clocksContainerEl.appendChild(clock);
            });
        }

        function checkAnswer(selectedHour, selectedMinutes) {
            if (feedbackEl.textContent !== '') return; 

            if (selectedHour === correctHour && selectedMinutes === correctMinutes) {
                feedbackEl.textContent = 'Mecanismo Perfeito! Acertou! 🎉';
                feedbackEl.style.color = '#76ff03';
                nextButtonEl.style.display = 'block';
            } else {
                feedbackEl.textContent = 'Engrenagem emperrada! Tente de novo! 🤔';
                feedbackEl.style.color = '#ff1744';
            }
        }

        nextButtonEl.addEventListener('click', newRound);
        
        // Iniciar a primeira rodada
        newRound();
    </script>
</body>
</html>
