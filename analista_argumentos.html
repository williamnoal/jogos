<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analista de Argumentos (Vers√£o 2.1)</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap');
        :root {
            --azul-civitas: #1A3E6F;
            --cinza-texto: #363736;
            --amarelo-destaque: #f9a825;
            --verde-correto: #2e7d32;
            --vermelho-incorreto: #c62828;
            --fundo-claro: #f0f4f8;
            --branco: #ffffff;
        }
        body, html {
            height: 100%; margin: 0; font-family: 'Lato', sans-serif;
            background-color: var(--fundo-claro); display: flex;
            justify-content: center; align-items: center; overflow: hidden;
            -webkit-font-smoothing: antialiased;
        }
        
        /* --- Bot√£o Voltar Global --- */
        #btn-voltar-global {
            position: fixed;
            top: 20px;
            left: 20px;
            background-color: var(--branco);
            color: var(--azul-civitas);
            padding: 10px 20px;
            border-radius: 20px;
            text-decoration: none;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            z-index: 1000;
            transition: transform 0.2s;
        }
        #btn-voltar-global:hover {
            transform: scale(1.05);
        }

        /* --- Telas de In√≠cio e Fim --- */
        .tela-overlay {
            background-color: var(--branco); padding: 40px; border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08); text-align: center;
            width: 90%; max-width: 700px;
            border-top: 5px solid var(--azul-civitas);
        }
        .tela-overlay h1 { color: var(--azul-civitas); font-size: 2em; margin-bottom: 15px; }
        .tela-overlay p { color: var(--cinza-texto); font-size: 1.2em; line-height: 1.6; margin-bottom: 30px; }
        .resumo-erros { text-align: left; background-color: #f9f9f9; padding: 20px; border-radius: 8px; margin-bottom: 30px; }
        .resumo-erros h3 { margin-top: 0; color: var(--azul-civitas); }
        .resumo-erros ul { padding-left: 20px; margin: 0; }
        .resumo-erros li { margin-bottom: 10px; }
        .btn-principal {
            background-color: var(--amarelo-destaque); color: var(--cinza-texto);
            border: none; padding: 15px 40px; border-radius: 8px; cursor: pointer;
            font-size: 1.2em; font-weight: bold; transition: all 0.3s;
        }
        .btn-principal:hover { transform: translateY(-3px); box-shadow: 0 4px 15px rgba(0,0,0,0.15); }

        /* --- Estrutura Principal da Atividade --- */
        main.card {
            background-color: var(--branco); padding: 30px 40px; border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            width: 90%; max-width: 750px; border-top: 5px solid var(--azul-civitas);
            transition: transform 0.3s ease; text-align: center;
        }
        p#contador { text-align: right; font-size: 1em; color: #777; font-weight: bold; margin: 0; margin-bottom: 10px; }
        h1#titulo-pergunta { color: var(--azul-civitas); margin-top: 0; font-size: 1.8em; }
        p.texto-argumentativo { font-size: 1.3em; color: var(--cinza-texto); line-height: 1.6; margin: 25px 0; text-align: left; }
        .destaque { background-color: var(--amarelo-destaque); color: var(--cinza-texto); padding: 2px 6px; border-radius: 4px; font-weight: bold; }
        #glossario-container { background-color: #f9f9f9; border-top: 2px solid #eee; margin: 20px 0; padding: 15px; text-align: left; }
        #glossario-container h3 { margin: 0 0 10px 0; color: var(--azul-civitas); font-size: 1.1em; }
        .termo-glossario { margin-bottom: 8px; font-size: 1em; }
        .termo-glossario strong { font-weight: 700; color: var(--cinza-texto); }
        .opcoes button { display: block; width: 100%; text-align: left; background-color: #fdfdfd; color: var(--cinza-texto); border: 2px solid #ddd; padding: 15px 20px; margin: 10px 0; border-radius: 8px; cursor: pointer; font-size: 1.05em; transition: all 0.2s ease; }
        .opcoes button:not(:disabled):hover { border-color: var(--amarelo-destaque); background-color: #fffaf0; }
        .opcoes button:disabled { cursor: not-allowed; opacity: 0.8; }
        #feedback { margin-top: 20px; padding: 15px; border-radius: 8px; text-align: left; display: none; }
        #feedback.correto { background-color: #e8f5e9; border-left: 5px solid var(--verde-correto); }
        #feedback.incorreto { background-color: #ffebee; border-left: 5px solid var(--vermelho-incorreto); }
        #feedback h3 { margin: 0 0 5px 0; }
        #feedback.correto h3 { color: var(--verde-correto); }
        #feedback.incorreto h3 { color: var(--vermelho-incorreto); }
        #feedback p { margin: 0; }
        #btn-avancar { background-color: var(--azul-civitas); color: var(--branco); border: none; padding: 15px 40px; margin-top: 20px; border-radius: 8px; cursor: pointer; font-size: 1.1em; font-weight: bold; transition: transform 0.2s, box-shadow 0.2s; display: none; }
        #btn-avancar:hover { transform: translateY(-3px); box-shadow: 0 4px 10px rgba(0,0,0,0.15); }
    </style>
</head>
<body>
    <a href="index.html" id="btn-voltar-global">‚Äπ Voltar</a>

    <div id="tela-inicial" class="tela-overlay">
        <h1>Analista de Argumentos</h1>
        <p>Sua miss√£o √© ler atentamente cada frase e identificar a fun√ß√£o correta do sinal de pontua√ß√£o destacado. Use o gloss√°rio para ajudar a entender as palavras. Vamos come√ßar?</p>
        <button id="btn-comecar" class="btn-principal">Come√ßar!</button>
    </div>

    <div id="tela-final" class="tela-overlay" style="display: none;">
        <h1>Parab√©ns! üèÜ</h1>
        <p>Voc√™ concluiu a an√°lise de todos os argumentos! Veja abaixo algumas dicas personalizadas para refor√ßar seu aprendizado.</p>
        <div id="resumo-erros-container" class="resumo-erros" style="display: none;">
            <h3>Dicas para voc√™:</h3>
            <ul id="lista-erros"></ul>
        </div>
        <button id="btn-reiniciar" class="btn-principal">Jogar Novamente</button>
    </div>

    <main class="card" style="display: none;">
        <p id="contador"></p>
        <h1 id="titulo-pergunta">Qual a fun√ß√£o da pontua√ß√£o destacada?</h1>
        <p id="frase" class="texto-argumentativo"></p>
        <div id="glossario-container">
            <h3>Palavras e Conectores</h3>
            <div id="glossario-lista"></div>
        </div>
        <div id="opcoes" class="opcoes"></div>
        <div id="feedback">
            <h3 id="feedback-titulo"></h3>
            <p id="feedback-texto"></p>
        </div>
        <button id="btn-avancar">Avan√ßar</button>
    </main>

    <script>
        const questoes = [
            { frase: "A tecnologia<destaque>,</destaque> sem d√∫vida<destaque>,</destaque> transformou o mundo.", opcoes: ["Para encaixar um coment√°rio extra na frase.", "Para separar os itens de uma lista.", "Para indicar a fala de um personagem."], correta: 0, feedbackAcerto: "Isso mesmo! As v√≠rgulas servem para 'abra√ßar' um coment√°rio ou uma explica√ß√£o que est√° no meio da frase, como 'sem d√∫vida'.", feedbackErro: "Quase l√°! A regra aqui √© que as v√≠rgulas separam um coment√°rio extra no meio da frase. A express√£o 'sem d√∫vida' √© um exemplo disso.", glossario: [{termo:"Transformou", definicao:"Mudou completamente."},{termo:"Sem d√∫vida", definicao:"Conector que serve para dar certeza."}], tipoErro: "V√≠rgula para Intercalar" },
            { frase: "Para que uma sociedade avance<destaque>,</destaque> o investimento em educa√ß√£o √© essencial.", opcoes: ["Para separar a 'condi√ß√£o' do 'resultado' na frase.", "Para indicar uma pausa longa para respirar.", "Para separar o nome de quem se chama."], correta: 0, feedbackAcerto: "Exato! A v√≠rgula separa a parte da frase que mostra uma condi√ß√£o ('Para que avance...') do seu resultado ('√© essencial').", feedbackErro: "Aten√ß√£o! Neste caso, usamos a v√≠rgula porque a parte que indica uma condi√ß√£o ('Para que avance...') veio no in√≠cio da frase, antes da ideia principal.", glossario: [{termo:"Essencial", definicao:"Algo muito importante."},{termo:"Para que", definicao:"Conector que indica um objetivo."}], tipoErro: "V√≠rgula para Deslocar" },
            { frase: "O desmatamento na Amaz√¥nia<destaque>‚Äî</destaque>um problema de escala global<destaque>‚Äî</destaque>afeta o clima mundial.", opcoes: ["Para indicar que o pensamento foi cortado de repente.", "Para separar a fala de um personagem.", "Para dar um super destaque a uma explica√ß√£o."], correta: 2, feedbackAcerto: "Perfeito! Os travess√µes s√£o como 'super v√≠rgulas' e servem para dar mais destaque e for√ßa a uma explica√ß√£o importante.", feedbackErro: "Faltou pouco! Lembre-se que os travess√µes s√£o usados para dar um destaque especial a uma explica√ß√£o no meio da frase, com mais √™nfase que as v√≠rgulas.", glossario: [{termo:"Escala global", definicao:"Algo que atinge o mundo inteiro."}], tipoErro: "Uso do Travess√£o" },
            { frase: "A conclus√£o √© clara<destaque>:</destaque> precisamos agir agora para frear o aquecimento global.", opcoes: ["Para mostrar que algu√©m vai come√ßar a falar.", "Para anunciar uma explica√ß√£o que vir√° em seguida.", "Para mostrar a c√≥pia de um texto longo."], correta: 1, feedbackAcerto: "Correto! Os dois-pontos funcionam como uma seta, avisando que uma explica√ß√£o ou conclus√£o est√° chegando.", feedbackErro: "Neste caso, os dois-pontos servem para anunciar a explica√ß√£o que vem logo depois. Pense neles como um sinal de 'preste aten√ß√£o no que vem a seguir'.", glossario: [{termo:"Frear", definicao:"Diminuir a velocidade, parar algo."}], tipoErro: "Uso dos Dois-Pontos" },
            { frase: "As redes sociais<destaque>,</destaque> que prometiam conectar o mundo<destaque>,</destaque> √†s vezes nos isolam.", opcoes: ["Para separar uma opini√£o pessoal.", "Para dar uma explica√ß√£o extra sobre a palavra anterior.", "Para mostrar que uma palavra foi omitida."], correta: 1, feedbackAcerto: "√ìtimo! A parte entre v√≠rgulas ('que prometiam conectar o mundo') √© uma explica√ß√£o extra sobre o que s√£o as 'redes sociais'.", feedbackErro: "Observe bem. A parte entre v√≠rgulas est√° dando uma informa√ß√£o a mais sobre as 'redes sociais'. √â para isso que servem as v√≠rgulas aqui.", glossario: [{termo:"Isolam", definicao:"Deixando as pessoas sozinhas."}], tipoErro: "V√≠rgula para Intercalar" },
            { frase: "A reciclagem √© fundamental<destaque>;</destaque> contudo, sua pr√°tica ainda √© pequena.", opcoes: ["Para ligar duas ideias completas que conversam entre si.", "Para indicar uma pausa para criar suspense.", "Para separar os itens de uma lista simples (p√£o, leite...)."], correta: 0, feedbackAcerto: "Excelente! O ponto e v√≠rgula √© uma pausa mais forte que a v√≠rgula. Ele conecta duas ideias que poderiam ser frases separadas, mas que t√™m uma forte rela√ß√£o.", feedbackErro: "O ponto e v√≠rgula √© usado para ligar duas ideias completas que se relacionam. √â como uma pausa mais forte que a v√≠rgula, mas que n√£o encerra o assunto como o ponto final.", glossario: [{termo:"Fundamental", definicao:"Algo muito importante."},{termo:"Contudo", definicao:"Conector que indica oposi√ß√£o (mas, por√©m)."}], tipoErro: "Uso do Ponto e V√≠rgula" },
            { frase: "Ele comprou tudo o que precisava<destaque>:</destaque> p√£o, leite e ovos.", opcoes: ["Para indicar que a frase terminou.", "Para apresentar uma lista de itens.", "Para criar um momento de suspense na hist√≥ria."], correta: 1, feedbackAcerto: "Isso a√≠! Os dois-pontos s√£o perfeitos para anunciar uma lista, como a lista de compras que veio depois.", feedbackErro: "Lembre-se: uma das principais fun√ß√µes dos dois-pontos √© anunciar uma lista de itens. Foi exatamente o que aconteceu aqui.", glossario: [], tipoErro: "Uso dos Dois-Pontos" },
            { frase: "Os alunos<destaque> (</destaque>pelo menos a maioria<destaque>)</destaque> entenderam o projeto.", opcoes: ["Para colocar uma informa√ß√£o super importante.", "Para marcar a fala de um personagem no texto.", "Para encaixar um coment√°rio de lado, que n√£o √© essencial."], correta: 2, feedbackAcerto: "Mandou bem! Os par√™nteses servem para inserir uma informa√ß√£o extra, um coment√°rio que poderia ser retirado sem estragar o sentido principal da frase.", feedbackErro: "Quase! Os par√™nteses s√£o usados para encaixar um coment√°rio 'de lado', uma informa√ß√£o que n√£o √© a mais importante da frase.", glossario: [], tipoErro: "Uso dos Par√™nteses" },
            { frase: "Investir em saneamento n√£o √© gasto<destaque>,</destaque> √© investimento em sa√∫de.", opcoes: ["Para separar duas ideias curtas e com sentidos opostos.", "Para indicar a falta de um verbo na frase.", "Para separar o lugar da data em um cabe√ßalho."], correta: 0, feedbackAcerto: "Perfeito! A v√≠rgula √© usada para separar ideias opostas e curtas, como 'n√£o √© X, √© Y', para dar mais for√ßa √† mensagem.", feedbackErro: "A dica aqui √© notar a oposi√ß√£o de ideias: 'n√£o √© gasto' versus '√© investimento'. A v√≠rgula serve para marcar essa separa√ß√£o.", glossario: [{termo:"Saneamento", definicao:"Servi√ßos de tratamento de √°gua e esgoto."}], tipoErro: "V√≠rgula para Oposi√ß√£o" },
            { frase: "O time jogou muito bem<destaque>;</destaque> no entanto, n√£o conseguiu a vit√≥ria.", opcoes: ["Para ligar duas ideias completas, sendo uma oposi√ß√£o √† outra.", "Para separar os ingredientes de uma receita.", "Para iniciar uma explica√ß√£o muito longa e detalhada."], correta: 0, feedbackAcerto: "Exato! O ponto e v√≠rgula conecta as duas frases, mostrando que a segunda ideia ('n√£o conseguiu a vit√≥ria') √© uma oposi√ß√£o √† primeira ('jogou muito bem').", feedbackErro: "Aqui temos duas frases completas ligadas por um conector de oposi√ß√£o ('no entanto'). O ponto e v√≠rgula √© ideal para fazer essa conex√£o.", glossario: [{termo:"No entanto", definicao:"Conector que indica oposi√ß√£o (mas, por√©m)."}], tipoErro: "Uso do Ponto e V√≠rgula" }
        ];

        let questaoAtual = 0;
        let erros = [];
        
        const telaInicialEl = document.getElementById('tela-inicial');
        const telaFinalEl = document.getElementById('tela-final');
        const mainCardEl = document.querySelector('main.card');
        
        const fraseEl = document.getElementById('frase');
        const opcoesEl = document.getElementById('opcoes');
        const feedbackEl = document.getElementById('feedback');
        const feedbackTituloEl = document.getElementById('feedback-titulo');
        const feedbackTextoEl = document.getElementById('feedback-texto');
        const btnAvancarEl = document.getElementById('btn-avancar');
        const contadorEl = document.getElementById('contador');
        const glossarioContainerEl = document.getElementById('glossario-container');
        const glossarioListaEl = document.getElementById('glossario-lista');
        const btnComecarEl = document.getElementById('btn-comecar');
        const btnReiniciarEl = document.getElementById('btn-reiniciar');
        const resumoContainerEl = document.getElementById('resumo-erros-container');
        const listaErrosEl = document.getElementById('lista-erros');

        function iniciarAtividade() {
            telaInicialEl.style.display = 'none';
            mainCardEl.style.display = 'block';
            carregarQuestao();
        }

        function finalizarAtividade() {
            mainCardEl.style.display = 'none';
            telaFinalEl.style.display = 'block';
            gerarResumoDeErros();
        }

        function reiniciarAtividade() {
            window.location.reload();
        }

        function gerarResumoDeErros() {
            if (erros.length === 0) {
                resumoContainerEl.style.display = 'none';
                return;
            }

            const contagemErros = erros.reduce((acc, erro) => {
                acc[erro] = (acc[erro] || 0) + 1;
                return acc;
            }, {});

            const errosMaisComuns = Object.keys(contagemErros).sort((a, b) => contagemErros[b] - contagemErros[a]);
            
            listaErrosEl.innerHTML = '';
            resumoContainerEl.style.display = 'block';

            errosMaisComuns.slice(0, 2).forEach(tipoErro => {
                const li = document.createElement('li');
                if (tipoErro === "V√≠rgula para Intercalar") {
                    li.innerHTML = "Voc√™ teve alguns desafios com <strong>v√≠rgulas que separam coment√°rios</strong>. Lembre-se: express√µes como 'sem d√∫vida' ou que d√£o uma explica√ß√£o extra no meio da frase devem ficar entre v√≠rgulas.";
                } else if (tipoErro === "Uso dos Dois-Pontos") {
                    li.innerHTML = "Parece que o uso dos <strong>dois-pontos (:)</strong> foi um desafio. Use-os sempre que for anunciar uma lista ou uma explica√ß√£o de algo que acabou de ser dito.";
                } else if (tipoErro === "Uso do Ponto e V√≠rgula") {
                    li.innerHTML = "Notamos que o <strong>ponto e v√≠rgula (;)</strong> gerou d√∫vidas. Ele serve para criar uma pausa maior que a v√≠rgula, ligando duas ideias completas que se relacionam.";
                } else if (tipoErro === "V√≠rgula para Deslocar") {
                     li.innerHTML = "Aten√ß√£o com a <strong>v√≠rgula no in√≠cio das frases</strong>. Quando uma ideia de tempo ou condi√ß√£o ('Quando chove...', 'Para que funcione...') vem no come√ßo, ela deve ser separada por v√≠rgula.";
                } else {
                     li.innerHTML = `Voc√™ teve alguns desafios com <strong>${tipoErro}</strong>. Continue praticando para dominar essa regra!`;
                }
                listaErrosEl.appendChild(li);
            });
        }

        function carregarQuestao() {
            // Embaralha as quest√µes uma vez no in√≠cio
            if (questaoAtual === 0 && questoes.length > 1) {
                for (let i = questoes.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [questoes[i], questoes[j]] = [questoes[j], questoes[i]];
                }
            }
        
            if (questaoAtual >= questoes.length) {
                finalizarAtividade();
                return;
            }

            const q = questoes[questaoAtual];
            contadorEl.textContent = `Quest√£o ${questaoAtual + 1} de ${questoes.length}`;
            fraseEl.innerHTML = q.frase.replace(/<destaque>/g, '<span class="destaque">').replace(/<\/destaque>/g, '</span>');
            opcoesEl.innerHTML = '';
            glossarioListaEl.innerHTML = '';

            if (q.glossario && q.glossario.length > 0) {
                glossarioContainerEl.style.display = 'block';
                q.glossario.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'termo-glossario';
                    div.innerHTML = `<strong>${item.termo}:</strong> ${item.definicao}`;
                    glossarioListaEl.appendChild(div);
                });
            } else {
                glossarioContainerEl.style.display = 'none';
            }
            
            q.opcoes.forEach((opcao, index) => {
                const button = document.createElement('button');
                button.innerText = opcao;
                button.addEventListener('click', () => selecionarOpcao(index));
                opcoesEl.appendChild(button);
            });

            feedbackEl.style.display = 'none';
            btnAvancarEl.style.display = 'none';
        }

        function selecionarOpcao(index) {
            const q = questoes[questaoAtual];
            const botoes = opcoesEl.querySelectorAll('button');
            botoes.forEach(btn => btn.disabled = true);

            if (index === q.correta) {
                feedbackEl.className = 'correto';
                feedbackTituloEl.innerText = 'Correto!';
                feedbackTextoEl.innerText = q.feedbackAcerto; // << MUDAN√áA AQUI
                botoes[index].style.borderColor = 'var(--verde-correto)';
                botoes[index].style.backgroundColor = '#e8f5e9';
            } else {
                feedbackEl.className = 'incorreto';
                feedbackTituloEl.innerText = 'Incorreto.';
                feedbackTextoEl.innerText = q.feedbackErro; // << MUDAN√áA AQUI
                botoes[index].style.borderColor = 'var(--vermelho-incorreto)';
                botoes[index].style.backgroundColor = '#ffebee';
                
                const botaoCorreto = botoes[q.correta];
                botaoCorreto.style.borderColor = 'var(--verde-correto)';
                botaoCorreto.style.backgroundColor = '#e8f5e9';
                
                erros.push(q.tipoErro);
            }

            feedbackEl.style.display = 'block';
            btnAvancarEl.style.display = 'inline-block';
        }

        btnAvancarEl.addEventListener('click', () => {
            questaoAtual++;
            carregarQuestao();
        });

        btnComecarEl.addEventListener('click', iniciarAtividade);
        btnReiniciarEl.addEventListener('click', reiniciarAtividade);

    </script>
</body>
</html>