<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analista de Argumentos (Vers√£o Revisada)</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap');
        :root {
            --azul-civitas: #1A3E6F;
            --cinza-texto: #363736;
            --amarelo-destaque: #f9a825;
            --verde-correto: #2e7d32;
            --vermelho-incorreto: #c62828;
            --fundo-claro: #f0f4f8;
            --branco: #ffffff;
        }
        body, html {
            height: 100%; margin: 0; font-family: 'Lato', sans-serif;
            background-color: var(--fundo-claro); display: flex;
            justify-content: center; align-items: center; overflow: hidden;
            -webkit-font-smoothing: antialiased;
        }
        
        /* --- Bot√£o Voltar Global --- */
        #btn-voltar-global {
            position: fixed;
            top: 20px;
            left: 20px;
            background-color: var(--branco);
            color: var(--azul-civitas);
            padding: 10px 20px;
            border-radius: 20px;
            text-decoration: none;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            z-index: 1000;
            transition: transform 0.2s;
        }
        #btn-voltar-global:hover {
            transform: scale(1.05);
        }

        /* --- Telas de In√≠cio e Fim --- */
        .tela-overlay {
            background-color: var(--branco); padding: 40px; border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08); text-align: center;
            width: 90%; max-width: 700px;
            border-top: 5px solid var(--azul-civitas);
        }
        .tela-overlay h1 { color: var(--azul-civitas); font-size: 2em; margin-bottom: 15px; }
        .tela-overlay p { color: var(--cinza-texto); font-size: 1.2em; line-height: 1.6; margin-bottom: 30px; }
        .resumo-erros { text-align: left; background-color: #f9f9f9; padding: 20px; border-radius: 8px; margin-bottom: 30px; }
        .resumo-erros h3 { margin-top: 0; color: var(--azul-civitas); }
        .resumo-erros ul { padding-left: 20px; margin: 0; }
        .resumo-erros li { margin-bottom: 10px; }
        .btn-principal {
            background-color: var(--amarelo-destaque); color: var(--cinza-texto);
            border: none; padding: 15px 40px; border-radius: 8px; cursor: pointer;
            font-size: 1.2em; font-weight: bold; transition: all 0.3s;
        }
        .btn-principal:hover { transform: translateY(-3px); box-shadow: 0 4px 15px rgba(0,0,0,0.15); }

        /* --- Estrutura Principal da Atividade --- */
        main.card {
            background-color: var(--branco); padding: 30px 40px; border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            width: 90%; max-width: 750px; border-top: 5px solid var(--azul-civitas);
            transition: transform 0.3s ease; text-align: center;
        }
        p#contador { text-align: right; font-size: 1em; color: #777; font-weight: bold; margin: 0; margin-bottom: 10px; }
        h1#titulo-pergunta { color: var(--azul-civitas); margin-top: 0; font-size: 1.8em; }
        p.texto-argumentativo { font-size: 1.3em; color: var(--cinza-texto); line-height: 1.6; margin: 25px 0; text-align: left; }
        .destaque { background-color: var(--amarelo-destaque); color: var(--cinza-texto); padding: 2px 6px; border-radius: 4px; font-weight: bold; }
        #glossario-container { background-color: #f9f9f9; border-top: 2px solid #eee; margin: 20px 0; padding: 15px; text-align: left; }
        #glossario-container h3 { margin: 0 0 10px 0; color: var(--azul-civitas); font-size: 1.1em; }
        .termo-glossario { margin-bottom: 8px; font-size: 1em; }
        .termo-glossario strong { font-weight: 700; color: var(--cinza-texto); }
        .opcoes button { display: block; width: 100%; text-align: left; background-color: #fdfdfd; color: var(--cinza-texto); border: 2px solid #ddd; padding: 15px 20px; margin: 10px 0; border-radius: 8px; cursor: pointer; font-size: 1.05em; transition: all 0.2s ease; }
        .opcoes button:not(:disabled):hover { border-color: var(--amarelo-destaque); background-color: #fffaf0; }
        .opcoes button:disabled { cursor: not-allowed; opacity: 0.8; }
        #feedback { margin-top: 20px; padding: 15px; border-radius: 8px; text-align: left; display: none; }
        #feedback.correto { background-color: #e8f5e9; border-left: 5px solid var(--verde-correto); }
        #feedback.incorreto { background-color: #ffebee; border-left: 5px solid var(--vermelho-incorreto); }
        #feedback h3 { margin: 0 0 5px 0; }
        #feedback.correto h3 { color: var(--verde-correto); }
        #feedback.incorreto h3 { color: var(--vermelho-incorreto); }
        #feedback p { margin: 0; }
        #btn-avancar { background-color: var(--azul-civitas); color: var(--branco); border: none; padding: 15px 40px; margin-top: 20px; border-radius: 8px; cursor: pointer; font-size: 1.1em; font-weight: bold; transition: transform 0.2s, box-shadow 0.2s; display: none; }
        #btn-avancar:hover { transform: translateY(-3px); box-shadow: 0 4px 10px rgba(0,0,0,0.15); }
    </style>
</head>
<body>
    <a href="anos-finais.html" id="btn-voltar-global">‚Äπ Voltar</a>

    <div id="tela-inicial" class="tela-overlay">
        <h1>Analista de Argumentos</h1>
        <p>Sua miss√£o √© ler atentamente cada frase e identificar a fun√ß√£o correta do sinal de pontua√ß√£o destacado. Use o gloss√°rio para ajudar a entender as palavras. Vamos come√ßar?</p>
        <button id="btn-comecar" class="btn-principal">Come√ßar!</button>
    </div>

    <div id="tela-final" class="tela-overlay" style="display: none;">
        <h1>Parab√©ns! üèÜ</h1>
        <p>Voc√™ concluiu a an√°lise de todos os argumentos! Veja abaixo algumas dicas personalizadas para refor√ßar seu aprendizado.</p>
        <div id="resumo-erros-container" class="resumo-erros" style="display: none;">
            <h3>Dicas para voc√™:</h3>
            <ul id="lista-erros"></ul>
        </div>
        <button id="btn-reiniciar" class="btn-principal">Jogar Novamente</button>
    </div>

    <main class="card" style="display: none;">
        <p id="contador"></p>
        <h1 id="titulo-pergunta">Qual a fun√ß√£o da pontua√ß√£o destacada?</h1>
        <p id="frase" class="texto-argumentativo"></p>
        <div id="glossario-container">
            <h3>Palavras e Conectores</h3>
            <div id="glossario-lista"></div>
        </div>
        <div id="opcoes" class="opcoes"></div>
        <div id="feedback">
            <h3 id="feedback-titulo"></h3>
            <p id="feedback-texto"></p>
        </div>
        <button id="btn-avancar">Avan√ßar</button>
    </main>

    <script>
        const questoes = [
            { frase: "A tecnologia<destaque>,</destaque> sem d√∫vida<destaque>,</destaque> transformou a comunica√ß√£o moderna.", opcoes: ["Separar quem faz a a√ß√£o do resto da frase.", "Pausar a frase para encaixar um coment√°rio.", "Indicar que algu√©m vai come√ßar a falar."], correta: 1, comentario: "As v√≠rgulas isolam a express√£o 'sem d√∫vida', que funciona como um coment√°rio.", glossario: [{termo:"Moderna", definicao:"Relativo ao tempo presente."},{termo:"Sem d√∫vida", definicao:"Conector que serve para dar certeza."}], tipoErro: "V√≠rgula em Termos Intercalados" },
            { frase: "Para que uma sociedade avance<destaque>,</destaque> o investimento em educa√ß√£o √© essencial.", opcoes: ["Mostrar que a condi√ß√£o veio antes da a√ß√£o.", "Indicar uma pausa para respirar.", "Separar os itens de uma lista."], correta: 0, comentario: "A v√≠rgula separa a primeira parte da frase (a condi√ß√£o) da segunda parte (a consequ√™ncia).", glossario: [{termo:"Essencial", definicao:"Algo muito importante."},{termo:"Para que", definicao:"Conector que indica um objetivo."}], tipoErro: "V√≠rgula em Ora√ß√µes Deslocadas" },
            { frase: "O desmatamento na Amaz√¥nia<destaque>‚Äî</destaque> um problema de escala global<destaque>‚Äî</destaque> afeta o clima mundial.", opcoes: ["Indicar que o pensamento foi cortado.", "Separar a fala de um personagem.", "Dar destaque e for√ßa para uma explica√ß√£o."], correta: 2, comentario: "Os travess√µes d√£o um destaque maior para a explica√ß√£o, sendo mais fortes que as v√≠rgulas.", glossario: [{termo:"Escala global", definicao:"Algo que atinge o mundo inteiro."}], tipoErro: "Uso do Travess√£o" },
            { frase: "A conclus√£o √© clara<destaque>:</destaque> precisamos agir agora para frear o aquecimento global.", opcoes: ["Mostrar que algu√©m vai falar.", "Anunciar uma explica√ß√£o ou conclus√£o.", "Mostrar a c√≥pia de um texto longo."], correta: 1, comentario: "Os dois-pontos introduzem a conclus√£o que foi anunciada na primeira parte da frase.", glossario: [{termo:"Frear", definicao:"Diminuir a velocidade, parar algo."}], tipoErro: "Uso dos Dois-Pontos" },
            { frase: "Pol√≠ticos<destaque>,</destaque> empres√°rios e cidad√£os<destaque>:</destaque> todos t√™m responsabilidade.", opcoes: ["Separar um chamado ou vocativo.", "Indicar que a lista est√° incompleta.", "Introduzir uma palavra que resume a lista."], correta: 2, comentario: "Os dois-pontos aqui introduzem a palavra 'todos', que resume a lista anterior.", glossario: [{termo:"Responsabilidade", definicao:"O dever de responder por seus atos."}], tipoErro: "Uso dos Dois-Pontos" },
            { frase: "As redes sociais<destaque>,</destaque> que prometiam conectar o mundo<destaque>,</destaque> est√£o na verdade nos isolando?", opcoes: ["Separar um coment√°rio qualquer.", "Separar uma explica√ß√£o sobre 'as redes sociais'.", "Mostrar que uma palavra de a√ß√£o est√° faltando."], correta: 1, comentario: "A parte entre v√≠rgulas ('que prometiam conectar o mundo') √© uma explica√ß√£o sobre 'redes sociais'.", glossario: [{termo:"Isolando", definicao:"Deixando as pessoas sozinhas."}], tipoErro: "V√≠rgula em Termos Intercalados" },
            { frase: "A reciclagem √© fundamental<destaque>;</destaque> contudo, sua pr√°tica ainda √© insuficiente.", opcoes: ["Ligar duas ideias relacionadas com uma pausa forte.", "Indicar uma pausa para criar suspense.", "Separar itens de uma lista muito longa."], correta: 0, comentario: "O ponto e v√≠rgula conecta duas ideias completas que se relacionam, sendo uma pausa mais forte que a v√≠rgula.", glossario: [{termo:"Insuficiente", definicao:"Que n√£o √© o bastante."},{termo:"Contudo", definicao:"Conector que indica oposi√ß√£o (mas, por√©m)."}], tipoErro: "Uso do Ponto e V√≠rgula" },
            { frase: "A leitura desenvolve o senso cr√≠tico<destaque>;</destaque> os filmes<destaque>,</destaque> a percep√ß√£o visual.", opcoes: ["Separar itens de uma lista que j√° usam v√≠rgula.", "Indicar uma lista de a√ß√µes diferentes.", "Mostrar que as ideias n√£o t√™m rela√ß√£o."], correta: 0, comentario: "O ponto e v√≠rgula organiza uma lista quando os itens j√° possuem suas pr√≥prias v√≠rgulas.", glossario: [{termo:"Senso cr√≠tico", definicao:"A capacidade de analisar as coisas."}], tipoErro: "Uso do Ponto e V√≠rgula" },
            { frase: "A arte<destaque>,</destaque> na minha opini√£o<destaque>,</destaque> √© a mais alta forma de esperan√ßa.", opcoes: ["Separar uma explica√ß√£o t√©cnica.", "Isolar uma opini√£o pessoal no meio da frase.", "Separar o local da data em um cabe√ßalho."], correta: 1, comentario: "Express√µes como 'na minha opini√£o' s√£o coment√°rios e devem ser isoladas por v√≠rgulas.", glossario: [], tipoErro: "V√≠rgula em Termos Intercalados" },
            { frase: "O relat√≥rio aponta duas causas<destaque>:</destaque> o consumo excessivo e o descarte inadequado.", opcoes: ["Mostrar a c√≥pia de um texto.", "Anunciar uma lista de coisas.", "Separar duas ideias completas."], correta: 1, comentario: "Os dois-pontos s√£o usados para anunciar a lista de 'duas causas' que foi mencionada antes.", glossario: [{termo:"Descarte inadequado", definicao:"Jogar o lixo no lugar errado."}], tipoErro: "Uso dos Dois-Pontos" },
            { frase: "Os alunos<destaque> (</destaque>pelo menos a maioria<destaque>)</destaque> entenderam o projeto.", opcoes: ["Colocar uma explica√ß√£o muito importante.", "Marcar a fala de um personagem.", "Encaixar um coment√°rio extra, n√£o obrigat√≥rio."], correta: 2, comentario: "Os par√™nteses servem para inserir uma informa√ß√£o que n√£o √© essencial para o sentido principal da frase.", glossario: [], tipoErro: "Uso dos Par√™nteses" },
            { frase: "A tese do autor<destaque>,</destaque> de que a hist√≥ria √© c√≠clica<destaque>,</destaque> encontra muitos adeptos.", opcoes: ["Explicar o que √© a 'tese do autor'.", "Chamar a aten√ß√£o do autor.", "Mostrar as palavras exatas que algu√©m disse."], correta: 0, comentario: "A parte entre v√≠rgulas explica exatamente qual √© a 'tese do autor'.", glossario: [{termo:"C√≠clica", definicao:"Algo que se repete em ciclos."},{termo:"Adeptos", definicao:"Seguidores de uma ideia."}], tipoErro: "V√≠rgula em Termos Intercalados" },
            { frase: "Investir em saneamento n√£o √© gasto<destaque>,</destaque> √© investimento em sa√∫de.", opcoes: ["Separar duas ideias curtas e opostas.", "Esconder a falta de uma palavra.", "Separar uma qualidade da coisa."], correta: 0, comentario: "A v√≠rgula conecta duas ideias curtas e opostas ('n√£o √© X, √© Y') para criar um efeito forte.", glossario: [{termo:"Saneamento", definicao:"Servi√ßos de tratamento de √°gua e esgoto."}], tipoErro: "V√≠rgula em Ora√ß√µes Deslocadas" },
            { frase: "Ele comprou tudo o que precisava<destaque>:</destaque> p√£o, leite e ovos.", opcoes: ["Anunciar a fala de algu√©m.", "Apresentar uma lista de itens.", "Criar um momento de suspense."], correta: 1, comentario: "Correto! Os dois-pontos aqui servem para iniciar a lista de itens que ele comprou.", glossario: [], tipoErro: "Uso dos Dois-Pontos" },
            { frase: "O time jogou muito bem<destaque>;</destaque> no entanto, n√£o conseguiu a vit√≥ria.", opcoes: ["Ligar duas ideias relacionadas com uma pausa forte.", "Separar os ingredientes de uma receita.", "Iniciar uma explica√ß√£o longa."], correta: 0, comentario: "O ponto e v√≠rgula conecta as duas frases, mostrando que elas t√™m rela√ß√£o, e a segunda ideia contrasta com a primeira.", glossario: [{termo:"No entanto", definicao:"Conector que indica oposi√ß√£o (mas, por√©m)."}], tipoErro: "Uso do Ponto e V√≠rgula" }
        ];

        let questaoAtual = 0;
        let erros = [];
        
        // Elementos da tela
        const telaInicialEl = document.getElementById('tela-inicial');
        const telaFinalEl = document.getElementById('tela-final');
        const mainCardEl = document.querySelector('main.card');
        
        // Elementos da atividade
        const fraseEl = document.getElementById('frase');
        const opcoesEl = document.getElementById('opcoes');
        const feedbackEl = document.getElementById('feedback');
        const feedbackTituloEl = document.getElementById('feedback-titulo');
        const feedbackTextoEl = document.getElementById('feedback-texto');
        const btnAvancarEl = document.getElementById('btn-avancar');
        const contadorEl = document.getElementById('contador');
        const glossarioContainerEl = document.getElementById('glossario-container');
        const glossarioListaEl = document.getElementById('glossario-lista');
        const btnComecarEl = document.getElementById('btn-comecar');
        const btnReiniciarEl = document.getElementById('btn-reiniciar');
        const resumoContainerEl = document.getElementById('resumo-erros-container');
        const listaErrosEl = document.getElementById('lista-erros');

        function iniciarAtividade() {
            telaInicialEl.style.display = 'none';
            mainCardEl.style.display = 'block';
            carregarQuestao();
        }

        function finalizarAtividade() {
            mainCardEl.style.display = 'none';
            telaFinalEl.style.display = 'block';
            gerarResumoDeErros();
        }

        function reiniciarAtividade() {
            window.location.reload();
        }

        function gerarResumoDeErros() {
            if (erros.length === 0) {
                resumoContainerEl.style.display = 'none';
                return;
            }

            const contagemErros = erros.reduce((acc, erro) => {
                acc[erro] = (acc[erro] || 0) + 1;
                return acc;
            }, {});

            const errosMaisComuns = Object.keys(contagemErros).sort((a, b) => contagemErros[b] - contagemErros[a]);
            
            listaErrosEl.innerHTML = '';
            resumoContainerEl.style.display = 'block';

            errosMaisComuns.slice(0, 2).forEach(tipoErro => {
                const li = document.createElement('li');
                if (tipoErro === "V√≠rgula em Termos Intercalados") {
                    li.innerHTML = "Voc√™ teve alguns desafios com <strong>v√≠rgulas que separam coment√°rios</strong>. Lembre-se: express√µes como 'sem d√∫vida' ou que d√£o uma explica√ß√£o extra no meio da frase devem ficar entre v√≠rgulas.";
                } else if (tipoErro === "Uso dos Dois-Pontos") {
                    li.innerHTML = "Parece que o uso dos <strong>dois-pontos (:)</strong> foi um desafio. Use-os sempre que for anunciar uma lista, uma explica√ß√£o ou um resumo de algo que acabou de ser dito.";
                } else if (tipoErro === "Uso do Ponto e V√≠rgula") {
                    li.innerHTML = "Notamos que o <strong>ponto e v√≠rgula (;)</strong> gerou d√∫vidas. Ele serve para criar uma pausa maior que a v√≠rgula, geralmente para separar grandes ideias ou itens de uma lista que j√° usam v√≠rgulas.";
                } else if (tipoErro === "V√≠rgula em Ora√ß√µes Deslocadas") {
                    li.innerHTML = "Voc√™ confundiu o uso da <strong>v√≠rgula para separar ideias</strong>. Quando uma parte da frase que indica condi√ß√£o ou tempo ('Para que avance...', 'Quando chegar...') vem no in√≠cio, ela deve ser separada por v√≠rgula.";
                } else {
                     li.innerHTML = `Voc√™ teve alguns desafios com <strong>${tipoErro}</strong>. Continue praticando para dominar essa regra!`;
                }
                listaErrosEl.appendChild(li);
            });
        }

        function carregarQuestao() {
            if (questaoAtual >= questoes.length) {
                finalizarAtividade();
                return;
            }

            const q = questoes[questaoAtual];
            contadorEl.textContent = `Quest√£o ${questaoAtual + 1} de ${questoes.length}`;
            fraseEl.innerHTML = q.frase.replace(/<destaque>/g, '<span class="destaque">').replace(/<\/destaque>/g, '</span>');
            opcoesEl.innerHTML = '';
            glossarioListaEl.innerHTML = '';

            if (q.glossario.length > 0) {
                glossarioContainerEl.style.display = 'block';
                q.glossario.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'termo-glossario';
                    div.innerHTML = `<strong>${item.termo}:</strong> ${item.definicao}`;
                    glossarioListaEl.appendChild(div);
                });
            } else {
                glossarioContainerEl.style.display = 'none';
            }
            
            q.opcoes.forEach((opcao, index) => {
                const button = document.createElement('button');
                button.innerText = opcao;
                button.addEventListener('click', () => selecionarOpcao(index));
                opcoesEl.appendChild(button);
            });

            feedbackEl.style.display = 'none';
            btnAvancarEl.style.display = 'none';
        }

        function selecionarOpcao(index) {
            const q = questoes[questaoAtual];
            const botoes = opcoesEl.querySelectorAll('button');
            botoes.forEach(btn => btn.disabled = true);

            if (index === q.correta) {
                feedbackEl.className = 'correto';
                feedbackTituloEl.innerText = 'Correto!';
                feedbackTextoEl.innerText = q.comentario;
                botoes[index].style.borderColor = 'var(--verde-correto)';
                botoes[index].style.backgroundColor = '#e8f5e9';
            } else {
                feedbackEl.className = 'incorreto';
                feedbackTituloEl.innerText = 'Incorreto.';
                feedbackTextoEl.innerText = q.comentario;
                botoes[index].style.borderColor = 'var(--vermelho-incorreto)';
                botoes[index].style.backgroundColor = '#ffebee';
                
                const botaoCorreto = botoes[q.correta];
                botaoCorreto.style.borderColor = 'var(--verde-correto)';
                botaoCorreto.style.backgroundColor = '#e8f5e9';
                
                erros.push(q.tipoErro);
            }

            feedbackEl.style.display = 'block';
            btnAvancarEl.style.display = 'inline-block';
        }

        btnAvancarEl.addEventListener('click', () => {
            questaoAtual++;
            carregarQuestao();
        });

        btnComecarEl.addEventListener('click', iniciarAtividade);
        btnReiniciarEl.addEventListener('click', reiniciarAtividade);

    </script>
</body>
</html>