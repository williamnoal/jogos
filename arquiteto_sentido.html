<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arquiteto de Sentido (Vers√£o Definitiva)</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap');
        :root {
            --azul-civitas: #1A3E6F;
            --cinza-texto: #363736;
            --amarelo-destaque: #f9a825;
            --verde-correto: #2e7d32;
            --vermelho-incorreto: #c62828;
            --fundo-claro: #f0f4f8;
            --branco: #ffffff;
            --cinza-claro: #e0e0e0;
        }
        body, html {
            height: 100%; margin: 0; font-family: 'Lato', sans-serif;
            background-color: var(--fundo-claro); display: flex;
            justify-content: center; align-items: center; overflow: hidden;
            padding: 20px; box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
        }
        /* --- Bot√£o Voltar --- */
        .btn-voltar {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background-color: var(--azul-civitas);
            color: var(--branco);
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            font-size: 1em;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .btn-voltar:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.2);
        }
        /* --- Telas de In√≠cio e Fim --- */
        .tela-overlay {
            background-color: var(--branco); padding: 40px; border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08); text-align: center;
            width: 90%; max-width: 700px;
            border-top: 5px solid var(--azul-civitas);
        }
        .tela-overlay h1 { color: var(--azul-civitas); font-size: 2em; margin-bottom: 15px; }
        .tela-overlay p { color: var(--cinza-texto); font-size: 1.2em; line-height: 1.6; margin-bottom: 30px; }
        .resumo-erros { text-align: left; background-color: #f9f9f9; padding: 20px; border-radius: 8px; margin-bottom: 30px; }
        .resumo-erros h3 { margin-top: 0; color: var(--azul-civitas); }
        .resumo-erros ul { padding-left: 20px; margin: 0; }
        .resumo-erros li { margin-bottom: 10px; }
        .btn-principal {
            background-color: var(--amarelo-destaque); color: var(--cinza-texto);
            border: none; padding: 15px 40px; border-radius: 8px; cursor: pointer;
            font-size: 1.2em; font-weight: bold; transition: all 0.3s;
        }
        .btn-principal:hover { transform: translateY(-3px); box-shadow: 0 4px 15px rgba(0,0,0,0.15); }

        /* --- Estrutura Principal da Atividade --- */
        .container-principal { display: flex; align-items: stretch; gap: 20px; width: 100%; max-width: 1100px; height: 95vh; max-height: 700px; }
        .legenda-sidebar { background-color: var(--branco); padding: 25px; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.08); border-top: 5px solid var(--amarelo-destaque); width: 280px; flex-shrink: 0; }
        .legenda-sidebar h2 { margin: 0 0 20px 0; color: var(--azul-civitas); font-size: 1.4em; text-align: center; }
        .legenda-item { display: flex; align-items: center; gap: 15px; margin-bottom: 25px; }
        .legenda-sinal { font-size: 3em; font-weight: bold; color: var(--cinza-texto); width: 50px; text-align: center; }
        .legenda-texto p { margin: 0; font-size: 1em; line-height: 1.4; }
        .legenda-texto strong { color: var(--azul-civitas); }
        .legenda-emoji { font-size: 2em; }
        main.card {
            background-color: var(--branco); padding: 25px 35px; border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08); text-align: center;
            border-top: 5px solid var(--azul-civitas);
            flex-grow: 1; display: flex; flex-direction: column; justify-content: space-around;
        }
        h1#titulo-pergunta { color: var(--azul-civitas); margin: 0; font-size: 1.6em; }
        p#contador { font-size: 0.9em; color: #777; font-weight: bold; margin-bottom: 5px; }
        .argumento { border-left: 4px solid var(--cinza-claro); padding: 5px 15px; margin: 10px 0; text-align: left; }
        p.frase { font-size: 1.25em; color: var(--cinza-texto); line-height: 1.5; }
        #glossario-container { background-color: #f9f9f9; border-top: 2px solid #eee; margin: 10px 0; padding: 10px 15px; text-align: left; }
        #glossario-container h3 { margin: 0 0 8px 0; color: var(--azul-civitas); font-size: 1.05em; }
        .termo-glossario { margin-bottom: 5px; font-size: 0.95em; }
        .termo-glossario strong { font-weight: 700; color: var(--cinza-texto); }
        .opcoes { display: flex; justify-content: center; gap: 20px; margin-top: 15px; }
        .opcoes > div { flex: 1; max-width: 100px; }
        .opcoes label { background-color: var(--branco); border: 2px solid var(--cinza-claro); color: var(--azul-civitas); padding: 15px 10px; border-radius: 10px; cursor: pointer; transition: all 0.3s; display: block; -webkit-tap-highlight-color: transparent; }
        .opcoes span.sinal { font-size: 2.5em; font-weight: bold; display: block; line-height: 1; }
        .opcoes input[type="radio"] { display: none; }
        .opcoes input[type="radio"]:checked + label { border-color: var(--amarelo-destaque); background-color: #fffaf0; transform: scale(1.05); }
        .opcoes label.disabled { cursor: not-allowed; opacity: 0.7; }
        #feedback { margin-top: 10px; padding: 12px; border-radius: 8px; text-align: left; display: none; }
        #feedback.correto { background-color: #e8f5e9; border-left: 5px solid var(--verde-correto); }
        #feedback.incorreto { background-color: #ffebee; border-left: 5px solid var(--vermelho-incorreto); }
        #feedback h3 { margin: 0 0 5px 0; font-size: 1.1em; }
        #feedback p { margin: 0; font-size: 1em; }
        #btn-avancar { background-color: var(--azul-civitas); color: var(--branco); border: none; padding: 12px 35px; margin-top: 10px; border-radius: 8px; cursor: pointer; font-size: 1em; font-weight: bold; transition: transform 0.2s, box-shadow 0.2s; display: none; }
        #btn-avancar:hover { transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.15); }
    </style>
</head>
<body>
    <a href="anos-finais.html" class="btn-voltar">&#x2190; Voltar</a>

    <div id="tela-inicial" class="tela-overlay">
        <h1>Arquiteto de Sentido</h1>
        <p>Sua miss√£o √© escolher o sinal de pontua√ß√£o final que d√° a inten√ß√£o correta para cada frase. Um mesmo argumento pode virar uma certeza, uma d√∫vida ou uma emo√ß√£o, dependendo da sua escolha. Vamos l√°?</p>
        <button id="btn-comecar" class="btn-principal">Come√ßar!</button>
    </div>

    <div id="tela-final" class="tela-overlay" style="display: none;">
        <h1>Parab√©ns! üèÜ</h1>
        <p>Voc√™ concluiu todas as atividades! Veja abaixo algumas dicas baseadas nas suas respostas para praticar ainda mais.</p>
        <div id="resumo-erros-container" class="resumo-erros" style="display: none;">
            <h3>Dicas para voc√™:</h3>
            <ul id="lista-erros"></ul>
        </div>
        <button id="btn-reiniciar" class="btn-principal">Jogar Novamente</button>
    </div>
    
    <div class="container-principal" style="display: none;">
        <aside class="legenda-sidebar">
            <h2>Legenda R√°pida</h2>
            <div class="legenda-item"> <div class="legenda-sinal">.</div> <div class="legenda-texto"> <p><strong>Ponto Final</strong></p> <p>Termina uma frase com certeza e sem emo√ß√£o.</p> </div> <div class="legenda-emoji">‚úÖ</div> </div>
            <div class="legenda-item"> <div class="legenda-sinal">?</div> <div class="legenda-texto"> <p><strong>Interroga√ß√£o</strong></p> <p>Faz uma pergunta ou mostra uma d√∫vida.</p> </div> <div class="legenda-emoji">ü§î</div> </div>
            <div class="legenda-item"> <div class="legenda-sinal">!</div> <div class="legenda-texto"> <p><strong>Exclama√ß√£o</strong></p> <p>Mostra uma emo√ß√£o forte: surpresa, alegria, raiva.</p> </div> <div class="legenda-emoji">üòÆ</div> </div>
        </aside>

        <main class="card">
            <p id="contador"></p>
            <h1 id="titulo-pergunta"></h1>
            <div class="argumento"> <p id="frase" class="frase"></p> </div>
            <div id="glossario-container"> <h3>Palavras e Conectores</h3> <div id="glossario-lista"></div> </div>
            <div id="opcoes" class="opcoes"></div>
            <div id="feedback"> <h3 id="feedback-titulo"></h3> <p id="feedback-texto"></p> </div>
            <button id="btn-avancar">Avan√ßar</button>
        </main>
    </div>

    <script>
        const atividades = [
            // Os 20 exerc√≠cios com gloss√°rio e tipo de erro
            {
                pergunta: "Para transformar a frase em uma AFIRMA√á√ÉO definitiva, qual sinal voc√™ usa?",
                frase: "Considerando os argumentos, podemos concluir que a leitura expande o vocabul√°rio",
                opcoes: [".", "?", "!"], correta: 0,
                comentarioAcerto: "Exato! O ponto final encerra a ideia com certeza.",
                comentarioErro: "N√£o exatamente. Para fazer uma afirma√ß√£o, usamos o sinal que encerra a frase de forma neutra.",
                glossario: [ { termo: "Argumentos", definicao: "Raz√µes que usamos para defender uma ideia." }, { termo: "Expandir", definicao: "Aumentar, tornar maior." } ],
                tipoErro: "Afirma√ß√£o vs. D√∫vida/Emo√ß√£o"
            },
            {
                pergunta: "Para mostrar INCERTEZA ou provocar uma reflex√£o, qual sinal √© o ideal?",
                frase: "A tecnologia, que deveria nos aproximar, est√° na verdade criando barreiras",
                opcoes: ["!", ".", "?"], correta: 2,
                comentarioAcerto: "Perfeito! O ponto de interroga√ß√£o transforma a certeza em uma d√∫vida.",
                comentarioErro: "Pense bem: o objetivo √© criar uma d√∫vida. Qual sinal usamos para fazer perguntas?",
                glossario: [ { termo: "Barreiras", definicao: "Obst√°culos, coisas que atrapalham ou separam." } ],
                tipoErro: "D√∫vida vs. Afirma√ß√£o/Emo√ß√£o"
            },
            {
                pergunta: "Para expressar SURPRESA ou INDIGNA√á√ÉO, qual sinal usar?",
                frase: "√â inaceit√°vel que ainda existam pessoas sem acesso √† √°gua pot√°vel",
                opcoes: ["?", "!", "."], correta: 1,
                comentarioAcerto: "Isso mesmo! O ponto de exclama√ß√£o √© o sinal das emo√ß√µes fortes.",
                comentarioErro: "Opa! Para mostrar um sentimento forte, precisamos de um sinal que demonstre emo√ß√£o.",
                glossario: [ { termo: "Inaceit√°vel", definicao: "Algo que n√£o pode ser aceito ou permitido." } ],
                tipoErro: "Emo√ß√£o vs. D√∫vida/Afirma√ß√£o"
            },
             {
                pergunta: "Para fazer uma PERGUNTA RET√ìRICA (que faz pensar), qual sinal √© o melhor?",
                frase: "At√© quando vamos ignorar as consequ√™ncias do consumo excessivo",
                opcoes: [".", "!", "?"], correta: 2,
                comentarioAcerto: "Excelente! A interroga√ß√£o aqui n√£o espera uma resposta, mas sim provoca uma reflex√£o.",
                comentarioErro: "Aten√ß√£o: o objetivo √© fazer o leitor pensar. Qual sinal usamos para fazer perguntas?",
                glossario: [ { termo: "Ignorar", definicao: "N√£o dar aten√ß√£o, fingir que n√£o v√™." }, { termo: "Consequ√™ncias", definicao: "Resultados de uma a√ß√£o." } ],
                tipoErro: "D√∫vida vs. Afirma√ß√£o/Emo√ß√£o"
            },
            {
                pergunta: "Para transformar a frase em um forte APELO, qual sinal voc√™ usa?",
                frase: "√â preciso que todos se conscientizem sobre a import√¢ncia de preservar o meio ambiente",
                opcoes: ["?", ".", "!"], correta: 2,
                comentarioAcerto: "Exato! O ponto de exclama√ß√£o d√° um tom de urg√™ncia e apelo √† frase.",
                comentarioErro: "N√£o exatamente. Para fazer um apelo forte, precisamos de um sinal que demonstre emo√ß√£o.",
                glossario: [ { termo: "Conscientizar-se", definicao: "Perceber, entender a import√¢ncia de algo." } ],
                tipoErro: "Emo√ß√£o vs. D√∫vida/Afirma√ß√£o"
            },
            {
                pergunta: "Para fazer uma CONSTATA√á√ÉO simples e direta, qual sinal √© o correto?",
                frase: "Muitos jovens preferem jogos online a atividades ao ar livre",
                opcoes: ["!", ".", "?"], correta: 1,
                comentarioAcerto: "Perfeito! O ponto final √© usado para declarar um fato de forma neutra.",
                comentarioErro: "Cuidado, a ideia √© apenas constatar um fato, sem emo√ß√£o ou d√∫vida.",
                glossario: [ { termo: "Constata√ß√£o", definicao: "Observar e afirmar um fato como ele √©." } ],
                tipoErro: "Afirma√ß√£o vs. D√∫vida/Emo√ß√£o"
            },
            {
                pergunta: "Para mostrar INCREDULIDADE, qual sinal usar?",
                frase: "Ent√£o essa √© a solu√ß√£o proposta para um problema t√£o complexo",
                opcoes: [".", "?", "!"], correta: 1,
                comentarioAcerto: "Isso mesmo! A interroga√ß√£o aqui expressa d√∫vida e ironia.",
                comentarioErro: "Para mostrar que voc√™ n√£o acredita em algo, sua frase soaria como uma pergunta.",
                glossario: [ { termo: "Incredulidade", definicao: "Sentimento de n√£o acreditar em algo." }, { termo: "Complexo", definicao: "Complicado." } ],
                tipoErro: "D√∫vida vs. Afirma√ß√£o/Emo√ß√£o"
            },
            {
                pergunta: "Para fazer um ALERTA com urg√™ncia, qual pontua√ß√£o √© mais eficaz?",
                frase: "Cuidado com as not√≠cias falsas que circulam nas redes sociais",
                opcoes: ["?", "!", "."], correta: 1,
                comentarioAcerto: "Correto! A exclama√ß√£o d√° √† frase a for√ßa de um alerta.",
                comentarioErro: "Um alerta precisa de impacto! Qual sinal transmite mais for√ßa e emo√ß√£o?",
                glossario: [ { termo: "Circular", definicao: "Espalhar-se, passar de pessoa para pessoa." } ],
                tipoErro: "Emo√ß√£o vs. D√∫vida/Afirma√ß√£o"
            },
            {
                pergunta: "Para expressar uma DESCOBERTA com entusiasmo, qual sinal usar?",
                frase: "Ent√£o era isso que o autor queria dizer com aquela met√°fora",
                opcoes: [".", "?", "!"], correta: 2,
                comentarioAcerto: "Exato! O ponto de exclama√ß√£o mostra o entusiasmo da descoberta.",
                comentarioErro: "Uma descoberta √© um momento emocionante! Qual sinal expressa emo√ß√µes?",
                glossario: [ { termo: "Met√°fora", definicao: "Uma compara√ß√£o criativa." } ],
                tipoErro: "Emo√ß√£o vs. D√∫vida/Afirma√ß√£o"
            },
            {
                pergunta: "Para uma D√öVIDA genu√≠na, qual sinal √© necess√°rio?",
                frase: "Ser√° que a intelig√™ncia artificial um dia substituir√° os professores",
                opcoes: ["!", ".", "?"], correta: 2,
                comentarioAcerto: "Perfeito! 'Ser√° que' e a interroga√ß√£o confirmam a pergunta.",
                comentarioErro: "Observe como a frase come√ßa. 'Ser√° que' j√° indica uma d√∫vida.",
                glossario: [ { termo: "Intelig√™ncia artificial", definicao: "Tecnologia que faz m√°quinas 'pensarem'." } ],
                tipoErro: "D√∫vida vs. Afirma√ß√£o/Emo√ß√£o"
            },
            {
                pergunta: "Para expressar FRUSTRA√á√ÉO, qual sinal demonstra melhor esse sentimento?",
                frase: "Eu estudei tanto e mesmo assim n√£o consegui a nota que eu queria",
                opcoes: ["?", ".", "!"], correta: 2,
                comentarioAcerto: "Isso! O ponto de exclama√ß√£o transmite o sentimento de frustra√ß√£o.",
                comentarioErro: "Frustra√ß√£o √© um sentimento forte. Qual sinal expressa emo√ß√µes intensas?",
                glossario: [ { termo: "Frustra√ß√£o", definicao: "Sentimento de tristeza por n√£o conseguir algo." } ],
                tipoErro: "Emo√ß√£o vs. D√∫vida/Afirma√ß√£o"
            },
            {
                pergunta: "Para uma AFIRMA√á√ÉO com total convic√ß√£o, qual pontua√ß√£o usar?",
                frase: "N√£o h√° d√∫vidas de que a pr√°tica de esportes melhora a sa√∫de",
                opcoes: [".", "?", "!"], correta: 0,
                comentarioAcerto: "Correto! O ponto final transmite a seguran√ßa e a convic√ß√£o da frase.",
                comentarioErro: "A frase j√° diz 'N√£o h√° d√∫vidas'. O objetivo √© afirmar com certeza.",
                glossario: [ { termo: "Convic√ß√£o", definicao: "Certeza absoluta sobre algo." } ],
                tipoErro: "Afirma√ß√£o vs. D√∫vida/Emo√ß√£o"
            },
            {
                pergunta: "Para fazer um DESAFIO ou uma provoca√ß√£o, qual sinal se encaixa?",
                frase: "Voc√™ realmente acredita que essa atitude vai resolver o problema",
                opcoes: ["!", ".", "?"], correta: 2,
                comentarioAcerto: "Exato! A interroga√ß√£o, nesse contexto, tem um tom de desafio.",
                comentarioErro: "Um desafio √© uma forma de questionar a outra pessoa.",
                glossario: [ { termo: "Atitude", definicao: "Modo de se comportar, agir." } ],
                tipoErro: "D√∫vida vs. Afirma√ß√£o/Emo√ß√£o"
            },
            {
                pergunta: "Para expressar um lamento, uma TRISTEZA, qual sinal demonstra isso?",
                frase: "Infelizmente, nem todos valorizam a amizade verdadeira",
                opcoes: ["?", "!", "."], correta: 1,
                comentarioAcerto: "Perfeito. A exclama√ß√£o, junto com 'infelizmente', refor√ßa o tom de lamento.",
                comentarioErro: "A palavra 'infelizmente' j√° indica um sentimento. Qual sinal pode refor√ßar essa emo√ß√£o?",
                glossario: [ { termo: "Infelizmente", definicao: "Conector que indica algo triste." }, { termo: "Valorizar", definicao: "Dar import√¢ncia." } ],
                tipoErro: "Emo√ß√£o vs. D√∫vida/Afirma√ß√£o"
            },
            {
                pergunta: "Para uma pergunta que expressa SURPRESA, qual sinal √© o melhor?",
                frase: "Voc√™ n√£o sabia que o prazo final para o trabalho era hoje",
                opcoes: [".", "?", "!"], correta: 1,
                comentarioAcerto: "Isso mesmo! A interroga√ß√£o mostra que √© uma pergunta, mas com um sentimento de surpresa.",
                comentarioErro: "Mesmo com surpresa, a frase ainda √© uma pergunta.",
                glossario: [ { termo: "Prazo final", definicao: "A data e hora limite para entregar algo." } ],
                tipoErro: "D√∫vida vs. Afirma√ß√£o/Emo√ß√£o"
            },
            {
                pergunta: "Para uma DECLARA√á√ÉO FORMAL, como em um jornal, qual sinal usar?",
                frase: "As novas medidas econ√¥micas foram anunciadas pelo governo ontem",
                opcoes: [".", "?", "!"], correta: 0,
                comentarioAcerto: "Correto. O ponto final √© o padr√£o para textos informativos e formais.",
                comentarioErro: "Not√≠cias e declara√ß√µes formais evitam emo√ß√£o ou d√∫vida. Qual √© o sinal mais neutro?",
                glossario: [ { termo: "Medidas econ√¥micas", definicao: "A√ß√µes do governo sobre dinheiro." } ],
                tipoErro: "Afirma√ß√£o vs. D√∫vida/Emo√ß√£o"
            },
            {
                pergunta: "Para expressar um DESEJO forte, qual sinal demonstra essa vontade?",
                frase: "Ah, quem dera se as f√©rias pudessem durar para sempre",
                opcoes: ["?", ".", "!"], correta: 2,
                comentarioAcerto: "Perfeito! A exclama√ß√£o captura perfeitamente o tom de desejo.",
                comentarioErro: "'Quem dera' j√° indica um forte desejo. Qual sinal representa esse sentimento?",
                glossario: [ { termo: "Quem dera", definicao: "Express√£o usada para indicar um grande desejo." } ],
                tipoErro: "Emo√ß√£o vs. D√∫vida/Afirma√ß√£o"
            },
            {
                pergunta: "Para uma pergunta com resposta √≥bvia, qual sinal usar?",
                frase: "Depois de tudo isso, quem ainda duvidaria da sua capacidade",
                opcoes: ["!", "?", "."], correta: 1,
                comentarioAcerto: "Isso! A pergunta n√£o espera uma resposta real, ela serve para afirmar algo.",
                comentarioErro: "Mesmo que a resposta seja √≥bvia, a frase tem a estrutura de uma pergunta.",
                glossario: [ { termo: "Capacidade", definicao: "Habilidade de fazer algo bem." } ],
                tipoErro: "D√∫vida vs. Afirma√ß√£o/Emo√ß√£o"
            },
            {
                pergunta: "Para expressar admira√ß√£o, um ELOGIO, qual sinal se encaixa melhor?",
                frase: "Que apresenta√ß√£o incr√≠vel voc√™ fez para a turma",
                opcoes: [".", "?", "!"], correta: 2,
                comentarioAcerto: "Correto! A exclama√ß√£o √© ideal para elogios, pois transmite emo√ß√£o positiva.",
                comentarioErro: "Um elogio √© uma demonstra√ß√£o de emo√ß√£o positiva. Qual sinal √© o 'campe√£o' das emo√ß√µes?",
                glossario: [ { termo: "Incr√≠vel", definicao: "Algo muito bom, extraordin√°rio." } ],
                tipoErro: "Emo√ß√£o vs. D√∫vida/Afirma√ß√£o"
            },
            {
                pergunta: "Para uma certeza absoluta, qual √© o sinal?",
                frase: "O sol √© a estrela central do nosso sistema solar",
                opcoes: ["?", "!", "."], correta: 2,
                comentarioAcerto: "Exato! √â um fato cient√≠fico. O ponto final √© a √∫nica op√ß√£o correta.",
                comentarioErro: "A frase apresenta um fato, uma verdade. N√£o h√° d√∫vida nem emo√ß√£o.",
                glossario: [ { termo: "Sistema solar", definicao: "O conjunto de planetas que giram ao redor do Sol." } ],
                tipoErro: "Afirma√ß√£o vs. D√∫vida/Emo√ß√£o"
            }
        ];

        let atividadeAtual = 0;
        let erros = [];
        
        const telaInicialEl = document.getElementById('tela-inicial');
        const telaFinalEl = document.getElementById('tela-final');
        const containerPrincipalEl = document.querySelector('.container-principal');
        const perguntaEl = document.getElementById('titulo-pergunta');
        const fraseEl = document.getElementById('frase');
        const opcoesEl = document.getElementById('opcoes');
        const feedbackEl = document.getElementById('feedback');
        const feedbackTituloEl = document.getElementById('feedback-titulo');
        const feedbackTextoEl = document.getElementById('feedback-texto');
        const btnAvancarEl = document.getElementById('btn-avancar');
        const contadorEl = document.getElementById('contador');
        const glossarioContainerEl = document.getElementById('glossario-container');
        const glossarioListaEl = document.getElementById('glossario-lista');
        const btnComecarEl = document.getElementById('btn-comecar');
        const btnReiniciarEl = document.getElementById('btn-reiniciar');
        const resumoContainerEl = document.getElementById('resumo-erros-container');
        const listaErrosEl = document.getElementById('lista-erros');

        function iniciarAtividade() {
            telaInicialEl.style.display = 'none';
            containerPrincipalEl.style.display = 'flex';
            carregarAtividade();
        }

        function finalizarAtividade() {
            containerPrincipalEl.style.display = 'none';
            telaFinalEl.style.display = 'block';
            gerarResumoDeErros();
        }

        function reiniciarAtividade() {
            window.location.reload();
        }

        function gerarResumoDeErros() {
            if (erros.length === 0) {
                resumoContainerEl.style.display = 'none';
                return;
            }

            const contagemErros = erros.reduce((acc, erro) => {
                acc[erro] = (acc[erro] || 0) + 1;
                return acc;
            }, {});

            const errosMaisComuns = Object.keys(contagemErros).sort((a, b) => contagemErros[b] - contagemErros[a]);
            
            listaErrosEl.innerHTML = '';
            resumoContainerEl.style.display = 'block';

            errosMaisComuns.slice(0, 2).forEach(tipoErro => {
                const li = document.createElement('li');
                if (tipoErro === "Afirma√ß√£o vs. D√∫vida/Emo√ß√£o") {
                    li.innerHTML = "Voc√™ confundiu algumas vezes quando <strong>afirmar</strong> algo com um ponto final (.). Lembre-se: se n√£o h√° d√∫vida ou emo√ß√£o forte, o ponto final √© a escolha segura.";
                } else if (tipoErro === "D√∫vida vs. Afirma√ß√£o/Emo√ß√£o") {
                    li.innerHTML = "Parece que voc√™ tem d√∫vidas sobre quando usar o ponto de interroga√ß√£o (?). Use-o sempre que a frase tiver um tom de <strong>pergunta, d√∫vida ou incerteza</strong>.";
                } else if (tipoErro === "Emo√ß√£o vs. D√∫vida/Afirma√ß√£o") {
                    li.innerHTML = "Notamos que voc√™ hesitou ao usar o ponto de exclama√ß√£o (!). Use-o para mostrar <strong>emo√ß√µes fortes</strong> como surpresa, alegria, raiva ou para fazer um alerta.";
                }
                listaErrosEl.appendChild(li);
            });
        }

        function carregarAtividade() {
            if (atividadeAtual >= atividades.length) {
                finalizarAtividade();
                return;
            }

            const atv = atividades[atividadeAtual];
            contadorEl.textContent = `Atividade ${atividadeAtual + 1} de ${atividades.length}`;
            perguntaEl.textContent = atv.pergunta;
            fraseEl.textContent = atv.frase;
            opcoesEl.innerHTML = '';
            glossarioListaEl.innerHTML = '';
            
            atv.glossario.forEach(item => {
                const div = document.createElement('div');
                div.className = 'termo-glossario';
                div.innerHTML = `<strong>${item.termo}:</strong> ${item.definicao}`;
                glossarioListaEl.appendChild(div);
            });
            
            atv.opcoes.forEach((opcao, index) => {
                const inputId = `opcao-${index}`;
                const div = document.createElement('div');
                div.innerHTML = `
                    <input type="radio" id="${inputId}" name="pista">
                    <label for="${inputId}">
                        <span class="sinal">${opcao}</span>
                    </label>
                `;
                div.querySelector('input').addEventListener('click', () => selecionarOpcao(index));
                opcoesEl.appendChild(div);
            });

            feedbackEl.style.display = 'none';
            btnAvancarEl.style.display = 'none';
        }

        function selecionarOpcao(selectedIndex) {
            const atv = atividades[atividadeAtual];
            const labels = opcoesEl.querySelectorAll('label');
            labels.forEach(label => {
                label.classList.add('disabled');
                label.previousElementSibling.disabled = true;
            });
            
            const labelSelecionada = document.querySelector(`label[for="opcao-${selectedIndex}"]`);

            if (selectedIndex === atv.correta) {
                feedbackEl.className = 'correto';
                feedbackTituloEl.innerText = 'Correto!';
                feedbackTextoEl.innerText = atv.comentarioAcerto;
                labelSelecionada.style.borderColor = 'var(--verde-correto)';
                labelSelecionada.style.backgroundColor = '#e8f5e9';
            } else {
                feedbackEl.className = 'incorreto';
                feedbackTituloEl.innerText = 'Incorreto.';
                feedbackTextoEl.innerText = atv.comentarioErro;
                labelSelecionada.style.borderColor = 'var(--vermelho-incorreto)';
                labelSelecionada.style.backgroundColor = '#ffebee';
                
                const labelCorreta = document.querySelector(`label[for="opcao-${atv.correta}"]`);
                if (labelCorreta) {
                    labelCorreta.style.borderColor = 'var(--verde-correto)';
                    labelCorreta.style.backgroundColor = '#e8f5e9';
                }
                erros.push(atv.tipoErro);
            }
            
            fraseEl.textContent += atv.opcoes[selectedIndex];
            feedbackEl.style.display = 'block';
            btnAvancarEl.style.display = 'inline-block';
        }

        btnAvancarEl.addEventListener('click', () => {
            atividadeAtual++;
            carregarAtividade();
        });

        btnComecarEl.addEventListener('click', iniciarAtividade);
        btnReiniciarEl.addEventListener('click', reiniciarAtividade);
    </script>
</body>
</html>